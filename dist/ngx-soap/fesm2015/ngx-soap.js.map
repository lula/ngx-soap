{"version":3,"file":"ngx-soap.js","sources":["ng://ngx-soap/lib/soap/nscontext.ts","ng://ngx-soap/lib/soap/utils.ts","ng://ngx-soap/lib/soap/wsdl.ts","ng://ngx-soap/lib/soap/security/BasicAuthSecurity.ts","ng://ngx-soap/lib/soap/security/WSSecurity.ts","ng://ngx-soap/lib/soap/security/BearerSecurity.ts","ng://ngx-soap/lib/soap/security/NTLMSecurity.ts","ng://ngx-soap/lib/soap/security/security.ts","ng://ngx-soap/lib/soap/multipart.ts","ng://ngx-soap/lib/soap/soapAttachment.ts","ng://ngx-soap/lib/soap/client.ts","ng://ngx-soap/lib/soap/soap.ts","ng://ngx-soap/lib/ngx-soap.service.ts","ng://ngx-soap/lib/ngx-soap.module.ts","ng://ngx-soap/public_api.ts","ng://ngx-soap/ngx-soap.ts"],"sourcesContent":["'use strict';\r\n\r\nexport class NamespaceScope {\r\n  parent: any;\r\n  namespaces: any;\r\n  constructor(parent: any) {\r\n    if (!(this instanceof NamespaceScope)) {\r\n      return new NamespaceScope(parent);\r\n    }\r\n    this.parent = parent;\r\n    this.namespaces = {};  \r\n  }\r\n\r\n  getNamespaceURI = function(prefix, localOnly) {\r\n    switch (prefix) {\r\n      case 'xml':\r\n        return 'http://www.w3.org/XML/1998/namespace';\r\n      case 'xmlns':\r\n        return 'http://www.w3.org/2000/xmlns/';\r\n      default:\r\n        var nsUri = this.namespaces[prefix];\r\n        /*jshint -W116 */\r\n        if (nsUri != null) {\r\n          return nsUri.uri;\r\n        } else if (!localOnly && this.parent) {\r\n          return this.parent.getNamespaceURI(prefix);\r\n        } else {\r\n          return null;\r\n        }\r\n    }\r\n  }\r\n\r\n  getNamespaceMapping = function(prefix) {\r\n    switch (prefix) {\r\n      case 'xml':\r\n        return {\r\n          uri: 'http://www.w3.org/XML/1998/namespace',\r\n          prefix: 'xml',\r\n          declared: true\r\n        };\r\n      case 'xmlns':\r\n        return {\r\n          uri: 'http://www.w3.org/2000/xmlns/',\r\n          prefix: 'xmlns',\r\n          declared: true\r\n        };\r\n      default:\r\n        var mapping = this.namespaces[prefix];\r\n        /*jshint -W116 */\r\n        if (mapping != null) {\r\n          return mapping;\r\n        } else if (this.parent) {\r\n          return this.parent.getNamespaceMapping(prefix);\r\n        } else {\r\n          return null;\r\n        }\r\n    }\r\n  }\r\n\r\n  getPrefix = function(nsUri, localOnly) {\r\n    switch (nsUri) {\r\n      case 'http://www.w3.org/XML/1998/namespace':\r\n        return 'xml';\r\n      case 'http://www.w3.org/2000/xmlns/':\r\n        return 'xmlns';\r\n      default:\r\n        for (var p in this.namespaces) {\r\n          if (this.namespaces[p].uri === nsUri) {\r\n            return p;\r\n          }\r\n        }\r\n        if (!localOnly && this.parent) {\r\n          return this.parent.getPrefix(nsUri);\r\n        } else {\r\n          return null;\r\n        }\r\n    }\r\n  }\r\n}\r\n\r\nexport class NamespaceContext {\r\n  scopes: any[];\r\n  prefixCount: number; \r\n\r\n  constructor() {\r\n    if (!(this instanceof NamespaceContext)) {\r\n      return new NamespaceContext();\r\n    }\r\n    this.scopes = [];\r\n    this.pushContext();\r\n    this.prefixCount = 0;\r\n  }\r\n\r\n  addNamespace = function(prefix, nsUri, localOnly) {\r\n    if (this.getNamespaceURI(prefix, localOnly) === nsUri) {\r\n      return false;\r\n    }\r\n    if (this.currentScope) {\r\n      this.currentScope.namespaces[prefix] = {\r\n        uri: nsUri,\r\n        prefix: prefix,\r\n        declared: false\r\n      };\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  pushContext = function() {\r\n    var scope = new NamespaceScope(this.currentScope);\r\n    this.scopes.push(scope);\r\n    this.currentScope = scope;\r\n    return scope;\r\n  }\r\n\r\n  popContext = function() {\r\n    var scope = this.scopes.pop();\r\n    if (scope) {\r\n      this.currentScope = scope.parent;\r\n    } else {\r\n      this.currentScope = null;\r\n    }\r\n    return scope;\r\n  }\r\n\r\n  getNamespaceURI = function(prefix, localOnly) {\r\n    return this.currentScope && this.currentScope.getNamespaceURI(prefix, localOnly);\r\n  }\r\n\r\n  getPrefix = function(nsUri, localOnly) {\r\n    return this.currentScope && this.currentScope.getPrefix(nsUri, localOnly);\r\n  }\r\n  \r\n  registerNamespace = function(nsUri) {\r\n    var prefix = this.getPrefix(nsUri);\r\n    if (prefix) {\r\n      // If the namespace has already mapped to a prefix\r\n      return prefix;\r\n    } else {\r\n      // Try to generate a unique namespace\r\n      while (true) {\r\n        prefix = 'ns' + (++this.prefixCount);\r\n        if (!this.getNamespaceURI(prefix)) {\r\n          // The prefix is not used\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    this.addNamespace(prefix, nsUri, true);\r\n    return prefix;\r\n  }\r\n\r\n  declareNamespace = function(prefix, nsUri) {\r\n    if (this.currentScope) {\r\n      var mapping = this.currentScope.getNamespaceMapping(prefix);\r\n      if (mapping && mapping.uri === nsUri && mapping.declared) {\r\n        return false;\r\n      }\r\n      this.currentScope.namespaces[prefix] = {\r\n        uri: nsUri,\r\n        prefix: prefix,\r\n        declared: true\r\n      };\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Scope for XML namespaces\r\n * @param [parent] Parent scope\r\n * \r\n */\r\n// export function NamespaceScope(parent) {\r\n//   if (!(this instanceof NamespaceScope)) {\r\n//     return NamespaceScope(parent);\r\n//   }\r\n//   this.parent = parent;\r\n//   this.namespaces = {};\r\n// }\r\n\r\n// /**\r\n//  * Namespace context that manages hierarchical scopes\r\n//  *  {NamespaceContext}\r\n//  */\r\n// export function NamespaceContext() {\r\n//   if (!(this instanceof NamespaceContext)) {\r\n//     return NamespaceContext();\r\n//   }\r\n//   this.scopes = [];\r\n//   this.pushContext();\r\n//   this.prefixCount = 0;\r\n// }\r\n\r\n// /**\r\n//  * Look up the namespace URI by prefix\r\n//  * @param  prefix Namespace prefix\r\n//  * @param  [localOnly] Search current scope only\r\n//  *   Namespace URI\r\n//  */\r\n// NamespaceScope.prototype.getNamespaceURI = function(prefix, localOnly) {\r\n//   switch (prefix) {\r\n//     case 'xml':\r\n//       return 'http://www.w3.org/XML/1998/namespace';\r\n//     case 'xmlns':\r\n//       return 'http://www.w3.org/2000/xmlns/';\r\n//     default:\r\n//       var nsUri = this.namespaces[prefix];\r\n//       /*jshint -W116 */\r\n//       if (nsUri != null) {\r\n//         return nsUri.uri;\r\n//       } else if (!localOnly && this.parent) {\r\n//         return this.parent.getNamespaceURI(prefix);\r\n//       } else {\r\n//         return null;\r\n//       }\r\n//   }\r\n// };\r\n\r\n// NamespaceScope.prototype.getNamespaceMapping = function(prefix) {\r\n//   switch (prefix) {\r\n//     case 'xml':\r\n//       return {\r\n//         uri: 'http://www.w3.org/XML/1998/namespace',\r\n//         prefix: 'xml',\r\n//         declared: true\r\n//       };\r\n//     case 'xmlns':\r\n//       return {\r\n//         uri: 'http://www.w3.org/2000/xmlns/',\r\n//         prefix: 'xmlns',\r\n//         declared: true\r\n//       };\r\n//     default:\r\n//       var mapping = this.namespaces[prefix];\r\n//       /*jshint -W116 */\r\n//       if (mapping != null) {\r\n//         return mapping;\r\n//       } else if (this.parent) {\r\n//         return this.parent.getNamespaceMapping(prefix);\r\n//       } else {\r\n//         return null;\r\n//       }\r\n//   }\r\n// };\r\n\r\n// /**\r\n//  * Look up the namespace prefix by URI\r\n//  * @param  nsUri Namespace URI\r\n//  * @param  [localOnly] Search current scope only\r\n//  *   Namespace prefix\r\n//  */\r\n// NamespaceScope.prototype.getPrefix = function(nsUri, localOnly) {\r\n//   switch (nsUri) {\r\n//     case 'http://www.w3.org/XML/1998/namespace':\r\n//       return 'xml';\r\n//     case 'http://www.w3.org/2000/xmlns/':\r\n//       return 'xmlns';\r\n//     default:\r\n//       for (var p in this.namespaces) {\r\n//         if (this.namespaces[p].uri === nsUri) {\r\n//           return p;\r\n//         }\r\n//       }\r\n//       if (!localOnly && this.parent) {\r\n//         return this.parent.getPrefix(nsUri);\r\n//       } else {\r\n//         return null;\r\n//       }\r\n//   }\r\n// };\r\n\r\n// /**\r\n//  * Add a prefix/URI namespace mapping\r\n//  * @param  prefix Namespace prefix\r\n//  * @param  nsUri Namespace URI\r\n//  * @param  [localOnly] Search current scope only\r\n//  *  {boolean} true if the mapping is added or false if the mapping\r\n//  * already exists\r\n//  */\r\n// NamespaceContext.prototype.addNamespace = function(prefix, nsUri, localOnly) {\r\n//   if (this.getNamespaceURI(prefix, localOnly) === nsUri) {\r\n//     return false;\r\n//   }\r\n//   if (this.currentScope) {\r\n//     this.currentScope.namespaces[prefix] = {\r\n//       uri: nsUri,\r\n//       prefix: prefix,\r\n//       declared: false\r\n//     };\r\n//     return true;\r\n//   }\r\n//   return false;\r\n// };\r\n\r\n// /**\r\n//  * Push a scope into the context\r\n//  *  The current scope\r\n//  */\r\n// NamespaceContext.prototype.pushContext = function() {\r\n//   var scope = NamespaceScope(this.currentScope);\r\n//   this.scopes.push(scope);\r\n//   this.currentScope = scope;\r\n//   return scope;\r\n// };\r\n\r\n// /**\r\n//  * Pop a scope out of the context\r\n//  *   The removed scope\r\n//  */\r\n// NamespaceContext.prototype.popContext = function() {\r\n//   var scope = this.scopes.pop();\r\n//   if (scope) {\r\n//     this.currentScope = scope.parent;\r\n//   } else {\r\n//     this.currentScope = null;\r\n//   }\r\n//   return scope;\r\n// };\r\n\r\n// /**\r\n//  * Look up the namespace URI by prefix\r\n//  * @param  prefix Namespace prefix\r\n//  * @param  [localOnly] Search current scope only\r\n//  *   Namespace URI\r\n//  */\r\n// NamespaceContext.prototype.getNamespaceURI = function(prefix, localOnly) {\r\n//   return this.currentScope && this.currentScope.getNamespaceURI(prefix, localOnly);\r\n// };\r\n\r\n// /**\r\n//  * Look up the namespace prefix by URI\r\n//  * @param  nsURI Namespace URI\r\n//  * @param  [localOnly] Search current scope only\r\n//  *   Namespace prefix\r\n//  */\r\n// NamespaceContext.prototype.getPrefix = function(nsUri, localOnly) {\r\n//   return this.currentScope && this.currentScope.getPrefix(nsUri, localOnly);\r\n// };\r\n\r\n// /**\r\n//  * Register a namespace\r\n//  * @param  nsUri Namespace URI\r\n//  *   The matching or generated namespace prefix\r\n//  */\r\n// NamespaceContext.prototype.registerNamespace = function(nsUri) {\r\n//   var prefix = this.getPrefix(nsUri);\r\n//   if (prefix) {\r\n//     // If the namespace has already mapped to a prefix\r\n//     return prefix;\r\n//   } else {\r\n//     // Try to generate a unique namespace\r\n//     while (true) {\r\n//       prefix = 'ns' + (++this.prefixCount);\r\n//       if (!this.getNamespaceURI(prefix)) {\r\n//         // The prefix is not used\r\n//         break;\r\n//       }\r\n//     }\r\n//   }\r\n//   this.addNamespace(prefix, nsUri, true);\r\n//   return prefix;\r\n// };\r\n\r\n// /**\r\n//  * Declare a namespace prefix/uri mapping\r\n//  * @param  prefix Namespace prefix\r\n//  * @param  nsUri Namespace URI\r\n//  *   true if the declaration is created\r\n//  */\r\n// NamespaceContext.prototype.declareNamespace = function(prefix, nsUri) {\r\n//   if (this.currentScope) {\r\n//     var mapping = this.currentScope.getNamespaceMapping(prefix);\r\n//     if (mapping && mapping.uri === nsUri && mapping.declared) {\r\n//       return false;\r\n//     }\r\n//     this.currentScope.namespaces[prefix] = {\r\n//       uri: nsUri,\r\n//       prefix: prefix,\r\n//       declared: true\r\n//     };\r\n//     return true;\r\n//   }\r\n//   return false;\r\n// };\r\n","import sha1 from 'crypto-js/sha1';\r\nimport Base64 from 'crypto-js/enc-base64';\r\nimport { Buffer } from 'buffer';\r\n\r\nexport const passwordDigest = function passwordDigest(nonce, created, password) {\r\n  const rawNonce = new Buffer(nonce || '', 'base64').toString('binary');\r\n  return Base64.stringify(sha1(rawNonce + created + password, ''));\r\n};\r\n\r\nexport const TNS_PREFIX = '__tns__'; // Prefix for targetNamespace\r\n\r\n/**\r\n * Find a key from an object based on the value\r\n * @param  Namespace prefix/uri mapping\r\n * @param  nsURI value\r\n * @returns  The matching key\r\n */\r\nexport const findPrefix = function(xmlnsMapping, nsURI) {\r\n  for (const n in xmlnsMapping) {\r\n    if (n === TNS_PREFIX) { continue; }\r\n    if (xmlnsMapping[n] === nsURI) {\r\n      return n;\r\n    }\r\n  }\r\n};\r\n","/*\r\n * Copyright (c) 2011 Vinay Pulim <vinay@milewise.com>\r\n * MIT Licensed\r\n *\r\n */\r\n/*jshint proto:true*/\r\n\r\n\"use strict\";\r\n\r\nimport * as sax from 'sax';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { NamespaceContext } Â from './nscontext';\r\nimport * as _ from 'lodash';\r\nimport * as utils from './utils';\r\nimport * as url from 'url';\r\nimport { ok as assert } from 'assert';\r\n\r\nconst stripBom = (x: string): string => {\r\n  // Catches EFBBBF (UTF-8 BOM) because the buffer-to-string\r\n  // conversion translates it to FEFF (UTF-16 BOM)\r\n  if (x.charCodeAt(0) === 0xFEFF) {\r\n    return x.slice(1);\r\n  }\r\n\r\n  return x;\r\n}\r\n\r\n\r\n\r\n\r\nlet TNS_PREFIX = utils.TNS_PREFIX;\r\nlet findPrefix = utils.findPrefix;\r\n\r\nlet Primitives = {\r\n  string: 1,\r\n  boolean: 1,\r\n  decimal: 1,\r\n  float: 1,\r\n  double: 1,\r\n  anyType: 1,\r\n  byte: 1,\r\n  int: 1,\r\n  long: 1,\r\n  short: 1,\r\n  negativeInteger: 1,\r\n  nonNegativeInteger: 1,\r\n  positiveInteger: 1,\r\n  nonPositiveInteger: 1,\r\n  unsignedByte: 1,\r\n  unsignedInt: 1,\r\n  unsignedLong: 1,\r\n  unsignedShort: 1,\r\n  duration: 0,\r\n  dateTime: 0,\r\n  time: 0,\r\n  date: 0,\r\n  gYearMonth: 0,\r\n  gYear: 0,\r\n  gMonthDay: 0,\r\n  gDay: 0,\r\n  gMonth: 0,\r\n  hexBinary: 0,\r\n  base64Binary: 0,\r\n  anyURI: 0,\r\n  QName: 0,\r\n  NOTATION: 0\r\n};\r\n\r\nfunction splitQName(nsName) {\r\n  let i = typeof nsName === 'string' ? nsName.indexOf(':') : -1;\r\n  return i < 0 ? { prefix: TNS_PREFIX, name: nsName } :\r\n    { prefix: nsName.substring(0, i), name: nsName.substring(i + 1) };\r\n}\r\n\r\nfunction xmlEscape(obj) {\r\n  if (typeof (obj) === 'string') {\r\n    if (obj.substr(0, 9) === '<![CDATA[' && obj.substr(-3) === \"]]>\") {\r\n      return obj;\r\n    }\r\n    return obj\r\n      .replace(/&/g, '&amp;')\r\n      .replace(/</g, '&lt;')\r\n      .replace(/>/g, '&gt;')\r\n      .replace(/\"/g, '&quot;')\r\n      .replace(/'/g, '&apos;');\r\n  }\r\n\r\n  return obj;\r\n}\r\n\r\nlet trimLeft = /^[\\s\\xA0]+/;\r\nlet trimRight = /[\\s\\xA0]+$/;\r\n\r\nfunction trim(text) {\r\n  return text.replace(trimLeft, '').replace(trimRight, '');\r\n}\r\n\r\nfunction deepMerge(destination, source) {\r\n  return _.mergeWith(destination || {}, source, function (a, b) {\r\n    return _.isArray(a) ? a.concat(b) : undefined;\r\n  });\r\n}\r\n\r\nlet Element: any = function (nsName, attrs, options) {\r\n  let parts = splitQName(nsName);\r\n\r\n  this.nsName = nsName;\r\n  this.prefix = parts.prefix;\r\n  this.name = parts.name;\r\n  this.children = [];\r\n  this.xmlns = {};\r\n\r\n  this._initializeOptions(options);\r\n\r\n  for (let key in attrs) {\r\n    let match = /^xmlns:?(.*)$/.exec(key);\r\n    if (match) {\r\n      this.xmlns[match[1] ? match[1] : TNS_PREFIX] = attrs[key];\r\n    }\r\n    else {\r\n      if (key === 'value') {\r\n        this[this.valueKey] = attrs[key];\r\n      } else {\r\n        this['$' + key] = attrs[key];\r\n      }\r\n    }\r\n  }\r\n  if (this.$targetNamespace !== undefined) {\r\n    // Add targetNamespace to the mapping\r\n    this.xmlns[TNS_PREFIX] = this.$targetNamespace;\r\n  }\r\n};\r\n\r\nElement.prototype._initializeOptions = function (options) {\r\n  if (options) {\r\n    this.valueKey = options.valueKey || '$value';\r\n    this.xmlKey = options.xmlKey || '$xml';\r\n    this.ignoredNamespaces = options.ignoredNamespaces || [];\r\n  } else {\r\n    this.valueKey = '$value';\r\n    this.xmlKey = '$xml';\r\n    this.ignoredNamespaces = [];\r\n  }\r\n};\r\n\r\nElement.prototype.deleteFixedAttrs = function () {\r\n  this.children && this.children.length === 0 && delete this.children;\r\n  this.xmlns && Object.keys(this.xmlns).length === 0 && delete this.xmlns;\r\n  delete this.nsName;\r\n  delete this.prefix;\r\n  delete this.name;\r\n};\r\n\r\nElement.prototype.allowedChildren = [];\r\n\r\nElement.prototype.startElement = function (stack, nsName, attrs, options) {\r\n  if (!this.allowedChildren) {\r\n    return;\r\n  }\r\n\r\n  let ChildClass = this.allowedChildren[splitQName(nsName).name],\r\n    element = null;\r\n\r\n  if (ChildClass) {\r\n    stack.push(new ChildClass(nsName, attrs, options));\r\n  }\r\n  else {\r\n    this.unexpected(nsName);\r\n  }\r\n\r\n};\r\n\r\nElement.prototype.endElement = function (stack, nsName) {\r\n  if (this.nsName === nsName) {\r\n    if (stack.length < 2)\r\n      return;\r\n    let parent = stack[stack.length - 2];\r\n    if (this !== stack[0]) {\r\n      _.defaultsDeep(stack[0].xmlns, this.xmlns);\r\n      // delete this.xmlns;\r\n      parent.children.push(this);\r\n      parent.addChild(this);\r\n    }\r\n    stack.pop();\r\n  }\r\n};\r\n\r\nElement.prototype.addChild = function (child) {\r\n  return;\r\n};\r\n\r\nElement.prototype.unexpected = function (name) {\r\n  throw new Error('Found unexpected element (' + name + ') inside ' + this.nsName);\r\n};\r\n\r\nElement.prototype.description = function (definitions) {\r\n  return this.$name || this.name;\r\n};\r\n\r\nElement.prototype.init = function () {\r\n};\r\n\r\nElement.createSubClass = function () {\r\n  let root = this;\r\n  let subElement = function () {\r\n    root.apply(this, arguments);\r\n    this.init();\r\n  };\r\n  // inherits(subElement, root);\r\n  subElement.prototype.__proto__ = root.prototype;\r\n  return subElement;\r\n};\r\n\r\n\r\nlet ElementElement = Element.createSubClass();\r\nlet AnyElement = Element.createSubClass();\r\nlet InputElement = Element.createSubClass();\r\nlet OutputElement = Element.createSubClass();\r\nlet SimpleTypeElement = Element.createSubClass();\r\nlet RestrictionElement = Element.createSubClass();\r\nlet ExtensionElement = Element.createSubClass();\r\nlet ChoiceElement = Element.createSubClass();\r\nlet EnumerationElement = Element.createSubClass();\r\nlet ComplexTypeElement = Element.createSubClass();\r\nlet ComplexContentElement = Element.createSubClass();\r\nlet SimpleContentElement = Element.createSubClass();\r\nlet SequenceElement = Element.createSubClass();\r\nlet AllElement = Element.createSubClass();\r\nlet MessageElement = Element.createSubClass();\r\nlet DocumentationElement = Element.createSubClass();\r\n\r\nlet SchemaElement = Element.createSubClass();\r\nlet TypesElement = Element.createSubClass();\r\nlet OperationElement = Element.createSubClass();\r\nlet PortTypeElement = Element.createSubClass();\r\nlet BindingElement = Element.createSubClass();\r\nlet PortElement = Element.createSubClass();\r\nlet ServiceElement = Element.createSubClass();\r\nlet DefinitionsElement = Element.createSubClass();\r\n\r\nlet ElementTypeMap = {\r\n  types: [TypesElement, 'schema documentation'],\r\n  schema: [SchemaElement, 'element complexType simpleType include import'],\r\n  element: [ElementElement, 'annotation complexType'],\r\n  any: [AnyElement, ''],\r\n  simpleType: [SimpleTypeElement, 'restriction'],\r\n  restriction: [RestrictionElement, 'enumeration all choice sequence'],\r\n  extension: [ExtensionElement, 'all sequence choice'],\r\n  choice: [ChoiceElement, 'element sequence choice any'],\r\n  // group: [GroupElement, 'element group'],\r\n  enumeration: [EnumerationElement, ''],\r\n  complexType: [ComplexTypeElement, 'annotation sequence all complexContent simpleContent choice'],\r\n  complexContent: [ComplexContentElement, 'extension'],\r\n  simpleContent: [SimpleContentElement, 'extension'],\r\n  sequence: [SequenceElement, 'element sequence choice any'],\r\n  all: [AllElement, 'element choice'],\r\n\r\n  service: [ServiceElement, 'port documentation'],\r\n  port: [PortElement, 'address documentation'],\r\n  binding: [BindingElement, '_binding SecuritySpec operation documentation'],\r\n  portType: [PortTypeElement, 'operation documentation'],\r\n  message: [MessageElement, 'part documentation'],\r\n  operation: [OperationElement, 'documentation input output fault _operation'],\r\n  input: [InputElement, 'body SecuritySpecRef documentation header'],\r\n  output: [OutputElement, 'body SecuritySpecRef documentation header'],\r\n  fault: [Element, '_fault documentation'],\r\n  definitions: [DefinitionsElement, 'types message portType binding service import documentation'],\r\n  documentation: [DocumentationElement, '']\r\n};\r\n\r\nfunction mapElementTypes(types) {\r\n  let rtn = {};\r\n  types = types.split(' ');\r\n  types.forEach(function (type) {\r\n    rtn[type.replace(/^_/, '')] = (ElementTypeMap[type] || [Element])[0];\r\n  });\r\n  return rtn;\r\n}\r\n\r\nfor (let n in ElementTypeMap) {\r\n  let v = ElementTypeMap[n];\r\n  v[0].prototype.allowedChildren = mapElementTypes(v[1]);\r\n}\r\n\r\nMessageElement.prototype.init = function () {\r\n  this.element = null;\r\n  this.parts = null;\r\n};\r\n\r\nSchemaElement.prototype.init = function () {\r\n  this.complexTypes = {};\r\n  this.types = {};\r\n  this.elements = {};\r\n  this.includes = [];\r\n};\r\n\r\nTypesElement.prototype.init = function () {\r\n  this.schemas = {};\r\n};\r\n\r\nOperationElement.prototype.init = function () {\r\n  this.input = null;\r\n  this.output = null;\r\n  this.inputSoap = null;\r\n  this.outputSoap = null;\r\n  this.style = '';\r\n  this.soapAction = '';\r\n};\r\n\r\nPortTypeElement.prototype.init = function () {\r\n  this.methods = {};\r\n};\r\n\r\nBindingElement.prototype.init = function () {\r\n  this.transport = '';\r\n  this.style = '';\r\n  this.methods = {};\r\n};\r\n\r\nPortElement.prototype.init = function () {\r\n  this.location = null;\r\n};\r\n\r\nServiceElement.prototype.init = function () {\r\n  this.ports = {};\r\n};\r\n\r\nDefinitionsElement.prototype.init = function () {\r\n  if (this.name !== 'definitions') this.unexpected(this.nsName);\r\n  this.messages = {};\r\n  this.portTypes = {};\r\n  this.bindings = {};\r\n  this.services = {};\r\n  this.schemas = {};\r\n};\r\n\r\nDocumentationElement.prototype.init = function () {\r\n};\r\n\r\nSchemaElement.prototype.merge = function (source) {\r\n  assert(source instanceof SchemaElement);\r\n  if (this.$targetNamespace === source.$targetNamespace) {\r\n    _.merge(this.complexTypes, source.complexTypes);\r\n    _.merge(this.types, source.types);\r\n    _.merge(this.elements, source.elements);\r\n    _.merge(this.xmlns, source.xmlns);\r\n  }\r\n  return this;\r\n};\r\n\r\n\r\nSchemaElement.prototype.addChild = function (child) {\r\n  if (child.$name in Primitives)\r\n    return;\r\n  if (child.name === 'include' || child.name === 'import') {\r\n    let location = child.$schemaLocation || child.$location;\r\n    if (location) {\r\n      this.includes.push({\r\n        namespace: child.$namespace || child.$targetNamespace || this.$targetNamespace,\r\n        location: location\r\n      });\r\n    }\r\n  }\r\n  else if (child.name === 'complexType') {\r\n    this.complexTypes[child.$name] = child;\r\n  }\r\n  else if (child.name === 'element') {\r\n    this.elements[child.$name] = child;\r\n  }\r\n  else if (child.$name) {\r\n    this.types[child.$name] = child;\r\n  }\r\n  this.children.pop();\r\n  // child.deleteFixedAttrs();\r\n};\r\n//fix#325\r\nTypesElement.prototype.addChild = function (child) {\r\n  assert(child instanceof SchemaElement);\r\n\r\n  let targetNamespace = child.$targetNamespace;\r\n\r\n  if (!this.schemas.hasOwnProperty(targetNamespace)) {\r\n    this.schemas[targetNamespace] = child;\r\n  } else {\r\n    console.error('Target-Namespace \"' + targetNamespace + '\" already in use by another Schema!');\r\n  }\r\n};\r\n\r\nInputElement.prototype.addChild = function (child) {\r\n  if (child.name === 'body') {\r\n    this.use = child.$use;\r\n    if (this.use === 'encoded') {\r\n      this.encodingStyle = child.$encodingStyle;\r\n    }\r\n    this.children.pop();\r\n  }\r\n};\r\n\r\nOutputElement.prototype.addChild = function (child) {\r\n  if (child.name === 'body') {\r\n    this.use = child.$use;\r\n    if (this.use === 'encoded') {\r\n      this.encodingStyle = child.$encodingStyle;\r\n    }\r\n    this.children.pop();\r\n  }\r\n};\r\n\r\nOperationElement.prototype.addChild = function (child) {\r\n  if (child.name === 'operation') {\r\n    this.soapAction = child.$soapAction || '';\r\n    this.style = child.$style || '';\r\n    this.children.pop();\r\n  }\r\n};\r\n\r\nBindingElement.prototype.addChild = function (child) {\r\n  if (child.name === 'binding') {\r\n    this.transport = child.$transport;\r\n    this.style = child.$style;\r\n    this.children.pop();\r\n  }\r\n};\r\n\r\nPortElement.prototype.addChild = function (child) {\r\n  if (child.name === 'address' && typeof (child.$location) !== 'undefined') {\r\n    this.location = child.$location;\r\n  }\r\n};\r\n\r\nDefinitionsElement.prototype.addChild = function (child) {\r\n  let self = this;\r\n  if (child instanceof TypesElement) {\r\n    // Merge types.schemas into definitions.schemas\r\n    _.merge(self.schemas, child.schemas);\r\n  }\r\n  else if (child instanceof MessageElement) {\r\n    self.messages[child.$name] = child;\r\n  }\r\n  else if (child.name === 'import') {\r\n    self.schemas[child.$namespace] = new SchemaElement(child.$namespace, {});\r\n    self.schemas[child.$namespace].addChild(child);\r\n  }\r\n  else if (child instanceof PortTypeElement) {\r\n    self.portTypes[child.$name] = child;\r\n  }\r\n  else if (child instanceof BindingElement) {\r\n    if (child.transport === 'http://schemas.xmlsoap.org/soap/http' ||\r\n      child.transport === 'http://www.w3.org/2003/05/soap/bindings/HTTP/')\r\n      self.bindings[child.$name] = child;\r\n  }\r\n  else if (child instanceof ServiceElement) {\r\n    self.services[child.$name] = child;\r\n  }\r\n  else if (child instanceof DocumentationElement) {\r\n  }\r\n  this.children.pop();\r\n};\r\n\r\nMessageElement.prototype.postProcess = function (definitions) {\r\n  let part = null;\r\n  let child = undefined;\r\n  let children = this.children || [];\r\n  let ns = undefined;\r\n  let nsName = undefined;\r\n  let i = undefined;\r\n  let type = undefined;\r\n\r\n  for (i in children) {\r\n    if ((child = children[i]).name === 'part') {\r\n      part = child;\r\n      break;\r\n    }\r\n  }\r\n\r\n  if (!part) {\r\n    return;\r\n  }\r\n\r\n  if (part.$element) {\r\n    let lookupTypes = [],\r\n      elementChildren;\r\n\r\n    delete this.parts;\r\n\r\n    nsName = splitQName(part.$element);\r\n    ns = nsName.prefix;\r\n    let schema = definitions.schemas[definitions.xmlns[ns]];\r\n    this.element = schema.elements[nsName.name];\r\n    if (!this.element) {\r\n      // debug(nsName.name + \" is not present in wsdl and cannot be processed correctly.\");\r\n      return;\r\n    }\r\n    this.element.targetNSAlias = ns;\r\n    this.element.targetNamespace = definitions.xmlns[ns];\r\n\r\n    // set the optional $lookupType to be used within `client#_invoke()` when\r\n    // calling `wsdl#objectToDocumentXML()\r\n    this.element.$lookupType = part.$element;\r\n\r\n    elementChildren = this.element.children;\r\n\r\n    // get all nested lookup types (only complex types are followed)\r\n    if (elementChildren.length > 0) {\r\n      for (i = 0; i < elementChildren.length; i++) {\r\n        lookupTypes.push(this._getNestedLookupTypeString(elementChildren[i]));\r\n      }\r\n    }\r\n\r\n    // if nested lookup types where found, prepare them for furter usage\r\n    if (lookupTypes.length > 0) {\r\n      lookupTypes = lookupTypes.\r\n        join('_').\r\n        split('_').\r\n        filter(function removeEmptyLookupTypes(type) {\r\n          return type !== '^';\r\n        });\r\n\r\n      let schemaXmlns = definitions.schemas[this.element.targetNamespace].xmlns;\r\n\r\n      for (i = 0; i < lookupTypes.length; i++) {\r\n        lookupTypes[i] = this._createLookupTypeObject(lookupTypes[i], schemaXmlns);\r\n      }\r\n    }\r\n\r\n    this.element.$lookupTypes = lookupTypes;\r\n\r\n    if (this.element.$type) {\r\n      type = splitQName(this.element.$type);\r\n      let typeNs = schema.xmlns && schema.xmlns[type.prefix] || definitions.xmlns[type.prefix];\r\n\r\n      if (typeNs) {\r\n        if (type.name in Primitives) {\r\n          // this.element = this.element.$type;\r\n        }\r\n        else {\r\n          // first check local mapping of ns alias to namespace\r\n          schema = definitions.schemas[typeNs];\r\n          let ctype = schema.complexTypes[type.name] || schema.types[type.name] || schema.elements[type.name];\r\n\r\n\r\n          if (ctype) {\r\n            this.parts = ctype.description(definitions, schema.xmlns);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      let method = this.element.description(definitions, schema.xmlns);\r\n      this.parts = method[nsName.name];\r\n    }\r\n\r\n\r\n    this.children.splice(0, 1);\r\n  } else {\r\n    // rpc encoding\r\n    this.parts = {};\r\n    delete this.element;\r\n    for (i = 0; part = this.children[i]; i++) {\r\n      if (part.name === 'documentation') {\r\n        // <wsdl:documentation can be present under <wsdl:message>\r\n        continue;\r\n      }\r\n      assert(part.name === 'part', 'Expected part element');\r\n      nsName = splitQName(part.$type);\r\n      ns = definitions.xmlns[nsName.prefix];\r\n      type = nsName.name;\r\n      let schemaDefinition = definitions.schemas[ns];\r\n      if (typeof schemaDefinition !== 'undefined') {\r\n        this.parts[part.$name] = definitions.schemas[ns].types[type] || definitions.schemas[ns].complexTypes[type];\r\n      } else {\r\n        this.parts[part.$name] = part.$type;\r\n      }\r\n\r\n      if (typeof this.parts[part.$name] === 'object') {\r\n        this.parts[part.$name].prefix = nsName.prefix;\r\n        this.parts[part.$name].xmlns = ns;\r\n      }\r\n\r\n      this.children.splice(i--, 1);\r\n    }\r\n  }\r\n  this.deleteFixedAttrs();\r\n};\r\n\r\n/**\r\n * Takes a given namespaced String(for example: 'alias:property') and creates a lookupType\r\n * object for further use in as first (lookup) `parameterTypeObj` within the `objectToXML`\r\n * method and provides an entry point for the already existing code in `findChildSchemaObject`.\r\n *\r\n * @method _createLookupTypeObject\r\n * @param {String}            nsString          The NS String (for example \"alias:type\").\r\n * @param {Object}            xmlns       The fully parsed `wsdl` definitions object (including all schemas).\r\n * @returns {Object}\r\n * @private\r\n */\r\nMessageElement.prototype._createLookupTypeObject = function (nsString, xmlns) {\r\n  let splittedNSString = splitQName(nsString),\r\n    nsAlias = splittedNSString.prefix,\r\n    splittedName = splittedNSString.name.split('#'),\r\n    type = splittedName[0],\r\n    name = splittedName[1],\r\n    lookupTypeObj: any = {};\r\n\r\n  lookupTypeObj.$namespace = xmlns[nsAlias];\r\n  lookupTypeObj.$type = nsAlias + ':' + type;\r\n  lookupTypeObj.$name = name;\r\n\r\n  return lookupTypeObj;\r\n};\r\n\r\n/**\r\n * Iterates through the element and every nested child to find any defined `$type`\r\n * property and returns it in a underscore ('_') separated String (using '^' as default\r\n * value if no `$type` property was found).\r\n *\r\n * @method _getNestedLookupTypeString\r\n * @param {Object}            element         The element which (probably) contains nested `$type` values.\r\n * @returns {String}\r\n * @private\r\n */\r\nMessageElement.prototype._getNestedLookupTypeString = function (element) {\r\n  let resolvedType = '^',\r\n    excluded = this.ignoredNamespaces.concat('xs'); // do not process $type values wich start with\r\n\r\n  if (element.hasOwnProperty('$type') && typeof element.$type === 'string') {\r\n    if (excluded.indexOf(element.$type.split(':')[0]) === -1) {\r\n      resolvedType += ('_' + element.$type + '#' + element.$name);\r\n    }\r\n  }\r\n\r\n  if (element.children.length > 0) {\r\n    let self = this;\r\n\r\n    element.children.forEach(function (child) {\r\n      let resolvedChildType = self._getNestedLookupTypeString(child).replace(/\\^_/, '');\r\n\r\n      if (resolvedChildType && typeof resolvedChildType === 'string') {\r\n        resolvedType += ('_' + resolvedChildType);\r\n      }\r\n    });\r\n  }\r\n\r\n  return resolvedType;\r\n};\r\n\r\nOperationElement.prototype.postProcess = function (definitions, tag) {\r\n  let children = this.children;\r\n  for (let i = 0, child; child = children[i]; i++) {\r\n    if (child.name !== 'input' && child.name !== 'output')\r\n      continue;\r\n    if (tag === 'binding') {\r\n      this[child.name] = child;\r\n      children.splice(i--, 1);\r\n      continue;\r\n    }\r\n    let messageName = splitQName(child.$message).name;\r\n    let message = definitions.messages[messageName];\r\n    message.postProcess(definitions);\r\n    if (message.element) {\r\n      definitions.messages[message.element.$name] = message;\r\n      this[child.name] = message.element;\r\n    }\r\n    else {\r\n      this[child.name] = message;\r\n    }\r\n    children.splice(i--, 1);\r\n  }\r\n  this.deleteFixedAttrs();\r\n};\r\n\r\nPortTypeElement.prototype.postProcess = function (definitions) {\r\n  let children = this.children;\r\n  if (typeof children === 'undefined')\r\n    return;\r\n  for (let i = 0, child; child = children[i]; i++) {\r\n    if (child.name !== 'operation')\r\n      continue;\r\n    child.postProcess(definitions, 'portType');\r\n    this.methods[child.$name] = child;\r\n    children.splice(i--, 1);\r\n  }\r\n  delete this.$name;\r\n  this.deleteFixedAttrs();\r\n};\r\n\r\nBindingElement.prototype.postProcess = function (definitions) {\r\n  let type = splitQName(this.$type).name,\r\n    portType = definitions.portTypes[type],\r\n    style = this.style,\r\n    children = this.children;\r\n  if (portType) {\r\n    portType.postProcess(definitions);\r\n    this.methods = portType.methods;\r\n\r\n    for (let i = 0, child; child = children[i]; i++) {\r\n      if (child.name !== 'operation')\r\n        continue;\r\n      child.postProcess(definitions, 'binding');\r\n      children.splice(i--, 1);\r\n      child.style || (child.style = style);\r\n      let method = this.methods[child.$name];\r\n\r\n      if (method) {\r\n        method.style = child.style;\r\n        method.soapAction = child.soapAction;\r\n        method.inputSoap = child.input || null;\r\n        method.outputSoap = child.output || null;\r\n        method.inputSoap && method.inputSoap.deleteFixedAttrs();\r\n        method.outputSoap && method.outputSoap.deleteFixedAttrs();\r\n      }\r\n    }\r\n  }\r\n  delete this.$name;\r\n  delete this.$type;\r\n  this.deleteFixedAttrs();\r\n};\r\n\r\nServiceElement.prototype.postProcess = function (definitions) {\r\n  let children = this.children,\r\n    bindings = definitions.bindings;\r\n  if (children && children.length > 0) {\r\n    for (let i = 0, child; child = children[i]; i++) {\r\n      if (child.name !== 'port')\r\n        continue;\r\n      let bindingName = splitQName(child.$binding).name;\r\n      let binding = bindings[bindingName];\r\n      if (binding) {\r\n        binding.postProcess(definitions);\r\n        this.ports[child.$name] = {\r\n          location: child.location,\r\n          binding: binding\r\n        };\r\n        children.splice(i--, 1);\r\n      }\r\n    }\r\n  }\r\n  delete this.$name;\r\n  this.deleteFixedAttrs();\r\n};\r\n\r\n\r\nSimpleTypeElement.prototype.description = function (definitions) {\r\n  let children = this.children;\r\n  for (let i = 0, child; child = children[i]; i++) {\r\n    if (child instanceof RestrictionElement)\r\n      return this.$name + \"|\" + child.description();\r\n  }\r\n  return {};\r\n};\r\n\r\nRestrictionElement.prototype.description = function (definitions, xmlns) {\r\n  let children = this.children;\r\n  let desc;\r\n  for (let i = 0, child; child = children[i]; i++) {\r\n    if (child instanceof SequenceElement ||\r\n      child instanceof ChoiceElement) {\r\n      desc = child.description(definitions, xmlns);\r\n      break;\r\n    }\r\n  }\r\n  if (desc && this.$base) {\r\n    let type = splitQName(this.$base),\r\n      typeName = type.name,\r\n      ns = xmlns && xmlns[type.prefix] || definitions.xmlns[type.prefix],\r\n      schema = definitions.schemas[ns],\r\n      typeElement = schema && (schema.complexTypes[typeName] || schema.types[typeName] || schema.elements[typeName]);\r\n\r\n    desc.getBase = function () {\r\n      return typeElement.description(definitions, schema.xmlns);\r\n    };\r\n    return desc;\r\n  }\r\n\r\n  // then simple element\r\n  let base = this.$base ? this.$base + \"|\" : \"\";\r\n  return base + this.children.map(function (child) {\r\n    return child.description();\r\n  }).join(\",\");\r\n};\r\n\r\nExtensionElement.prototype.description = function (definitions, xmlns) {\r\n  let children = this.children;\r\n  let desc = {};\r\n  for (let i = 0, child; child = children[i]; i++) {\r\n    if (child instanceof SequenceElement ||\r\n      child instanceof ChoiceElement) {\r\n      desc = child.description(definitions, xmlns);\r\n    }\r\n  }\r\n  if (this.$base) {\r\n    let type = splitQName(this.$base),\r\n      typeName = type.name,\r\n      ns = xmlns && xmlns[type.prefix] || definitions.xmlns[type.prefix],\r\n      schema = definitions.schemas[ns];\r\n\r\n    if (typeName in Primitives) {\r\n      return this.$base;\r\n    }\r\n    else {\r\n      let typeElement = schema && (schema.complexTypes[typeName] ||\r\n        schema.types[typeName] || schema.elements[typeName]);\r\n\r\n      if (typeElement) {\r\n        let base = typeElement.description(definitions, schema.xmlns);\r\n        desc = _.defaultsDeep(base, desc);\r\n      }\r\n    }\r\n  }\r\n  return desc;\r\n};\r\n\r\nEnumerationElement.prototype.description = function () {\r\n  return this[this.valueKey];\r\n};\r\n\r\nComplexTypeElement.prototype.description = function (definitions, xmlns) {\r\n  let children = this.children || [];\r\n  for (let i = 0, child; child = children[i]; i++) {\r\n    if (child instanceof ChoiceElement ||\r\n      child instanceof SequenceElement ||\r\n      child instanceof AllElement ||\r\n      child instanceof SimpleContentElement ||\r\n      child instanceof ComplexContentElement) {\r\n\r\n      return child.description(definitions, xmlns);\r\n    }\r\n  }\r\n  return {};\r\n};\r\n\r\nComplexContentElement.prototype.description = function (definitions, xmlns) {\r\n  let children = this.children;\r\n  for (let i = 0, child; child = children[i]; i++) {\r\n    if (child instanceof ExtensionElement) {\r\n      return child.description(definitions, xmlns);\r\n    }\r\n  }\r\n  return {};\r\n};\r\n\r\nSimpleContentElement.prototype.description = function (definitions, xmlns) {\r\n  let children = this.children;\r\n  for (let i = 0, child; child = children[i]; i++) {\r\n    if (child instanceof ExtensionElement) {\r\n      return child.description(definitions, xmlns);\r\n    }\r\n  }\r\n  return {};\r\n};\r\n\r\nElementElement.prototype.description = function (definitions, xmlns) {\r\n  let element = {},\r\n    name = this.$name;\r\n  let isMany = !this.$maxOccurs ? false : (isNaN(this.$maxOccurs) ? (this.$maxOccurs === 'unbounded') : (this.$maxOccurs > 1));\r\n  if (this.$minOccurs !== this.$maxOccurs && isMany) {\r\n    name += '[]';\r\n  }\r\n\r\n  if (xmlns && xmlns[TNS_PREFIX]) {\r\n    this.$targetNamespace = xmlns[TNS_PREFIX];\r\n  }\r\n  let type = this.$type || this.$ref;\r\n  if (type) {\r\n    type = splitQName(type);\r\n    let typeName = type.name,\r\n      ns = xmlns && xmlns[type.prefix] || definitions.xmlns[type.prefix],\r\n      schema = definitions.schemas[ns],\r\n      typeElement = schema && (this.$type ? schema.complexTypes[typeName] || schema.types[typeName] : schema.elements[typeName]);\r\n\r\n    if (ns && definitions.schemas[ns]) {\r\n      xmlns = definitions.schemas[ns].xmlns;\r\n    }\r\n\r\n    if (typeElement && !(typeName in Primitives)) {\r\n\r\n      if (!(typeName in definitions.descriptions.types)) {\r\n\r\n        let elem: any = {};\r\n        definitions.descriptions.types[typeName] = elem;\r\n        let description = typeElement.description(definitions, xmlns);\r\n        if (typeof description === 'string') {\r\n          elem = description;\r\n        }\r\n        else {\r\n          Object.keys(description).forEach(function (key) {\r\n            elem[key] = description[key];\r\n          });\r\n        }\r\n\r\n        if (this.$ref) {\r\n          element = elem;\r\n        }\r\n        else {\r\n          element[name] = elem;\r\n        }\r\n\r\n        if (typeof elem === 'object') {\r\n          elem.targetNSAlias = type.prefix;\r\n          elem.targetNamespace = ns;\r\n        }\r\n\r\n        definitions.descriptions.types[typeName] = elem;\r\n      }\r\n      else {\r\n        if (this.$ref) {\r\n          element = definitions.descriptions.types[typeName];\r\n        }\r\n        else {\r\n          element[name] = definitions.descriptions.types[typeName];\r\n        }\r\n      }\r\n\r\n    }\r\n    else {\r\n      element[name] = this.$type;\r\n    }\r\n  }\r\n  else {\r\n    let children = this.children;\r\n    element[name] = {};\r\n    for (let i = 0, child; child = children[i]; i++) {\r\n      if (child instanceof ComplexTypeElement) {\r\n        element[name] = child.description(definitions, xmlns);\r\n      }\r\n    }\r\n  }\r\n  return element;\r\n};\r\n\r\nAllElement.prototype.description =\r\n  SequenceElement.prototype.description = function (definitions, xmlns) {\r\n    let children = this.children;\r\n    let sequence = {};\r\n    for (let i = 0, child; child = children[i]; i++) {\r\n      if (child instanceof AnyElement) {\r\n        continue;\r\n      }\r\n      let description = child.description(definitions, xmlns);\r\n      for (let key in description) {\r\n        sequence[key] = description[key];\r\n      }\r\n    }\r\n    return sequence;\r\n  };\r\n\r\nChoiceElement.prototype.description = function (definitions, xmlns) {\r\n  let children = this.children;\r\n  let choice = {};\r\n  for (let i = 0, child; child = children[i]; i++) {\r\n    let description = child.description(definitions, xmlns);\r\n    for (let key in description) {\r\n      choice[key] = description[key];\r\n    }\r\n  }\r\n  return choice;\r\n};\r\n\r\nMessageElement.prototype.description = function (definitions) {\r\n  if (this.element) {\r\n    return this.element && this.element.description(definitions);\r\n  }\r\n  let desc = {};\r\n  desc[this.$name] = this.parts;\r\n  return desc;\r\n};\r\n\r\nPortTypeElement.prototype.description = function (definitions) {\r\n  let methods = {};\r\n  for (let name in this.methods) {\r\n    let method = this.methods[name];\r\n    methods[name] = method.description(definitions);\r\n  }\r\n  return methods;\r\n};\r\n\r\nOperationElement.prototype.description = function (definitions) {\r\n  let inputDesc = this.input ? this.input.description(definitions) : null;\r\n  let outputDesc = this.output ? this.output.description(definitions) : null;\r\n  return {\r\n    input: inputDesc && inputDesc[Object.keys(inputDesc)[0]],\r\n    output: outputDesc && outputDesc[Object.keys(outputDesc)[0]]\r\n  };\r\n};\r\n\r\nBindingElement.prototype.description = function (definitions) {\r\n  let methods = {};\r\n  for (let name in this.methods) {\r\n    let method = this.methods[name];\r\n    methods[name] = method.description(definitions);\r\n  }\r\n  return methods;\r\n};\r\n\r\nServiceElement.prototype.description = function (definitions) {\r\n  let ports = {};\r\n  for (let name in this.ports) {\r\n    let port = this.ports[name];\r\n    ports[name] = port.binding.description(definitions);\r\n  }\r\n  return ports;\r\n};\r\n\r\nexport let WSDL = function (definition, uri, options) {\r\n  let self = this,\r\n    fromFunc;\r\n\r\n  this.uri = uri;\r\n  this.callback = function () {\r\n  };\r\n  this._includesWsdl = [];\r\n\r\n  // initialize WSDL cache\r\n  this.WSDL_CACHE = (options || {}).WSDL_CACHE || {};\r\n\r\n  this._initializeOptions(options);\r\n\r\n  if (typeof definition === 'string') {\r\n    definition = stripBom(definition);\r\n    fromFunc = this._fromXML;\r\n  }\r\n  else if (typeof definition === 'object') {\r\n    fromFunc = this._fromServices;\r\n  }\r\n  else {\r\n    throw new Error('WSDL letructor takes either an XML string or service definition');\r\n  }\r\n\r\n  Promise.resolve(true).then(() => {\r\n    try {\r\n      fromFunc.call(self, definition);\r\n    } catch (e) {\r\n      return self.callback(e.message);\r\n    }\r\n\r\n    self.processIncludes().then(() => {\r\n      self.definitions.deleteFixedAttrs();\r\n      let services = self.services = self.definitions.services;\r\n      if (services) {\r\n        for (const name in services) {\r\n          services[name].postProcess(self.definitions);\r\n        }\r\n      }\r\n      let complexTypes = self.definitions.complexTypes;\r\n      if (complexTypes) {\r\n        for (const name in complexTypes) {\r\n          complexTypes[name].deleteFixedAttrs();\r\n        }\r\n      }\r\n\r\n      // for document style, for every binding, prepare input message element name to (methodName, output message element name) mapping\r\n      let bindings = self.definitions.bindings;\r\n      for (let bindingName in bindings) {\r\n        let binding = bindings[bindingName];\r\n        if (typeof binding.style === 'undefined') {\r\n          binding.style = 'document';\r\n        }\r\n        if (binding.style !== 'document')\r\n          continue;\r\n        let methods = binding.methods;\r\n        let topEls = binding.topElements = {};\r\n        for (let methodName in methods) {\r\n          if (methods[methodName].input) {\r\n            let inputName = methods[methodName].input.$name;\r\n            let outputName = \"\";\r\n            if (methods[methodName].output)\r\n              outputName = methods[methodName].output.$name;\r\n            topEls[inputName] = { \"methodName\": methodName, \"outputName\": outputName };\r\n          }\r\n        }\r\n      }\r\n\r\n      // prepare soap envelope xmlns definition string\r\n      self.xmlnsInEnvelope = self._xmlnsMap();\r\n      self.callback(null, self);\r\n    }).catch(err => self.callback(err));\r\n\r\n  });\r\n\r\n  // process.nextTick(function() {\r\n  //   try {\r\n  //     fromFunc.call(self, definition);\r\n  //   } catch (e) {\r\n  //     return self.callback(e.message);\r\n  //   }\r\n\r\n  //   self.processIncludes(function(err) {\r\n  //     let name;\r\n  //     if (err) {\r\n  //       return self.callback(err);\r\n  //     }\r\n\r\n  //     self.definitions.deleteFixedAttrs();\r\n  //     let services = self.services = self.definitions.services;\r\n  //     if (services) {\r\n  //       for (name in services) {\r\n  //         services[name].postProcess(self.definitions);\r\n  //       }\r\n  //     }\r\n  //     let complexTypes = self.definitions.complexTypes;\r\n  //     if (complexTypes) {\r\n  //       for (name in complexTypes) {\r\n  //         complexTypes[name].deleteFixedAttrs();\r\n  //       }\r\n  //     }\r\n\r\n  //     // for document style, for every binding, prepare input message element name to (methodName, output message element name) mapping\r\n  //     let bindings = self.definitions.bindings;\r\n  //     for (let bindingName in bindings) {\r\n  //       let binding = bindings[bindingName];\r\n  //       if (typeof binding.style === 'undefined') {\r\n  //         binding.style = 'document';\r\n  //       }\r\n  //       if (binding.style !== 'document')\r\n  //         continue;\r\n  //       let methods = binding.methods;\r\n  //       let topEls = binding.topElements = {};\r\n  //       for (let methodName in methods) {\r\n  //         if (methods[methodName].input) {\r\n  //           let inputName = methods[methodName].input.$name;\r\n  //           let outputName=\"\";\r\n  //           if(methods[methodName].output )\r\n  //             outputName = methods[methodName].output.$name;\r\n  //           topEls[inputName] = {\"methodName\": methodName, \"outputName\": outputName};\r\n  //         }\r\n  //       }\r\n  //     }\r\n\r\n  //     // prepare soap envelope xmlns definition string\r\n  //     self.xmlnsInEnvelope = self._xmlnsMap();\r\n\r\n  //     self.callback(err, self);\r\n  //   });\r\n\r\n  // });\r\n};\r\n\r\nWSDL.prototype.ignoredNamespaces = ['tns', 'targetNamespace', 'typedNamespace'];\r\n\r\nWSDL.prototype.ignoreBaseNameSpaces = false;\r\n\r\nWSDL.prototype.valueKey = '$value';\r\nWSDL.prototype.xmlKey = '$xml';\r\n\r\nWSDL.prototype._initializeOptions = function (options) {\r\n  this._originalIgnoredNamespaces = (options || {}).ignoredNamespaces;\r\n  this.options = {};\r\n\r\n  let ignoredNamespaces = options ? options.ignoredNamespaces : null;\r\n\r\n  if (ignoredNamespaces &&\r\n    (Array.isArray(ignoredNamespaces.namespaces) || typeof ignoredNamespaces.namespaces === 'string')) {\r\n    if (ignoredNamespaces.override) {\r\n      this.options.ignoredNamespaces = ignoredNamespaces.namespaces;\r\n    } else {\r\n      this.options.ignoredNamespaces = this.ignoredNamespaces.concat(ignoredNamespaces.namespaces);\r\n    }\r\n  } else {\r\n    this.options.ignoredNamespaces = this.ignoredNamespaces;\r\n  }\r\n\r\n  this.options.valueKey = options.valueKey || this.valueKey;\r\n  this.options.xmlKey = options.xmlKey || this.xmlKey;\r\n  if (options.escapeXML !== undefined) {\r\n    this.options.escapeXML = options.escapeXML;\r\n  } else {\r\n    this.options.escapeXML = true;\r\n  }\r\n  if (options.returnFault !== undefined) {\r\n    this.options.returnFault = options.returnFault;\r\n  } else {\r\n    this.options.returnFault = false;\r\n  }\r\n  this.options.handleNilAsNull = !!options.handleNilAsNull;\r\n\r\n  if (options.namespaceArrayElements !== undefined) {\r\n    this.options.namespaceArrayElements = options.namespaceArrayElements;\r\n  } else {\r\n    this.options.namespaceArrayElements = true;\r\n  }\r\n\r\n  // Allow any request headers to keep passing through\r\n  this.options.wsdl_headers = options.wsdl_headers;\r\n  this.options.wsdl_options = options.wsdl_options;\r\n  if (options.httpClient) {\r\n    this.options.httpClient = options.httpClient;\r\n  }\r\n\r\n  // The supplied request-object should be passed through\r\n  if (options.request) {\r\n    this.options.request = options.request;\r\n  }\r\n\r\n  let ignoreBaseNameSpaces = options ? options.ignoreBaseNameSpaces : null;\r\n  if (ignoreBaseNameSpaces !== null && typeof ignoreBaseNameSpaces !== 'undefined') {\r\n    this.options.ignoreBaseNameSpaces = ignoreBaseNameSpaces;\r\n  } else {\r\n    this.options.ignoreBaseNameSpaces = this.ignoreBaseNameSpaces;\r\n  }\r\n\r\n  // Works only in client\r\n  this.options.forceSoap12Headers = options.forceSoap12Headers;\r\n  this.options.customDeserializer = options.customDeserializer;\r\n\r\n  if (options.overrideRootElement !== undefined) {\r\n    this.options.overrideRootElement = options.overrideRootElement;\r\n  }\r\n\r\n  this.options.useEmptyTag = !!options.useEmptyTag;\r\n};\r\n\r\nWSDL.prototype.onReady = function (callback) {\r\n  if (callback)\r\n    this.callback = callback;\r\n};\r\n\r\nWSDL.prototype._processNextInclude = async function (includes) {\r\n  let self = this,\r\n    include = includes.shift(),\r\n    options;\r\n\r\n  if (!include)\r\n    return; // callback();\r\n\r\n  let includePath;\r\n  if (!/^https?:/.test(self.uri) && !/^https?:/.test(include.location)) {\r\n    // includePath = path.resolve(path.dirname(self.uri), include.location);\r\n  } else {\r\n    includePath = url.resolve(self.uri || '', include.location);\r\n  }\r\n\r\n  options = _.assign({}, this.options);\r\n  // follow supplied ignoredNamespaces option\r\n  options.ignoredNamespaces = this._originalIgnoredNamespaces || this.options.ignoredNamespaces;\r\n  options.WSDL_CACHE = this.WSDL_CACHE;\r\n\r\n  const wsdl = await open_wsdl_recursive(includePath, options)\r\n  self._includesWsdl.push(wsdl);\r\n\r\n  if (wsdl.definitions instanceof DefinitionsElement) {\r\n    _.mergeWith(self.definitions, wsdl.definitions, function (a, b) {\r\n      return (a instanceof SchemaElement) ? a.merge(b) : undefined;\r\n    });\r\n  } else {\r\n    self.definitions.schemas[include.namespace || wsdl.definitions.$targetNamespace] = deepMerge(self.definitions.schemas[include.namespace || wsdl.definitions.$targetNamespace], wsdl.definitions);\r\n  }\r\n\r\n  return self._processNextInclude(includes);\r\n\r\n  // open_wsdl_recursive(includePath, options, function(err, wsdl) {\r\n  //   if (err) {\r\n  //     return callback(err);\r\n  //   }\r\n\r\n  //   self._includesWsdl.push(wsdl);\r\n\r\n  //   if (wsdl.definitions instanceof DefinitionsElement) {\r\n  //     _.mergeWith(self.definitions, wsdl.definitions, function(a,b) {\r\n  //       return (a instanceof SchemaElement) ? a.merge(b) : undefined;\r\n  //     });\r\n  //   } else {\r\n  //     self.definitions.schemas[include.namespace || wsdl.definitions.$targetNamespace] = deepMerge(self.definitions.schemas[include.namespace || wsdl.definitions.$targetNamespace], wsdl.definitions);\r\n  //   }\r\n  //   self._processNextInclude(includes, function(err) {\r\n  //     callback(err);\r\n  //   });\r\n  // });\r\n};\r\n\r\nWSDL.prototype.processIncludes = async function () {\r\n  let schemas = this.definitions.schemas,\r\n    includes = [];\r\n\r\n  for (let ns in schemas) {\r\n    let schema = schemas[ns];\r\n    includes = includes.concat(schema.includes || []);\r\n  }\r\n\r\n  return this._processNextInclude(includes);\r\n};\r\n\r\nWSDL.prototype.describeServices = function () {\r\n  let services = {};\r\n  for (let name in this.services) {\r\n    let service = this.services[name];\r\n    services[name] = service.description(this.definitions);\r\n  }\r\n  return services;\r\n};\r\n\r\nWSDL.prototype.toXML = function () {\r\n  return this.xml || '';\r\n};\r\n\r\nWSDL.prototype.xmlToObject = function (xml, callback) {\r\n  let self = this;\r\n  let p = typeof callback === 'function' ? {} : sax.parser(true);\r\n  let objectName = null;\r\n  let root: any = {};\r\n  let schema = {};\r\n  /*let schema = {\r\n    Envelope: {\r\n      Header: {\r\n        Security: {\r\n          UsernameToken: {\r\n            Username: 'string',\r\n            Password: 'string'\r\n          }\r\n        }\r\n      },\r\n      Body: {\r\n        Fault: {\r\n          faultcode: 'string',\r\n          faultstring: 'string',\r\n          detail: 'string'\r\n        }\r\n      }\r\n    }\r\n  };*/\r\n  if(!this.options.forceSoap12Headers){\r\n    schema ={\r\n      Envelope: {\r\n        Header: {\r\n          Security: {\r\n            UsernameToken: {\r\n              Username:'string',\r\n              Password:'string'\r\n            }\r\n          }\r\n        },\r\n        Body:{\r\n          Fault: {\r\n            faultcode: 'string',\r\n            faultstring: 'string',\r\n            detail:'string'\r\n          }\r\n        }\r\n      }\r\n    }\r\n  } else {\r\n    schema = {\r\n      Envelope: {\r\n        Header: {\r\n          Security: {\r\n            UsernameToken: {\r\n              Username: 'string',\r\n              Password: 'string'\r\n            }\r\n          }\r\n        },\r\n        Body: {\r\n          Code: {\r\n            Value: 'string',\r\n            Subcode:\r\n                {\r\n                  Value: 'string'\r\n                }\r\n          },\r\n          Reason: {Text: 'string'},\r\n          statusCode: 'number',\r\n          Detail: 'object'\r\n        }\r\n\r\n      }\r\n\r\n    }\r\n  }\r\n      let stack: any[] = [{ name: null, object: root, schema: schema }];\r\n  let xmlns: any = {};\r\n\r\n  let refs = {}, id; // {id:{hrefs:[],obj:}, ...}\r\n\r\n  p.onopentag = function (node) {\r\n    let nsName = node.name;\r\n    let attrs: any = node.attributes;\r\n    let name = splitQName(nsName).name,\r\n      attributeName,\r\n      top = stack[stack.length - 1],\r\n      topSchema = top.schema,\r\n      elementAttributes = {},\r\n      hasNonXmlnsAttribute = false,\r\n      hasNilAttribute = false,\r\n      obj = {};\r\n    let originalName = name;\r\n\r\n    if (!objectName && top.name === 'Body' && name !== 'Fault') {\r\n      let message = self.definitions.messages[name];\r\n      // Support RPC/literal messages where response body contains one element named\r\n      // after the operation + 'Response'. See http://www.w3.org/TR/wsdl#_names\r\n      if (!message) {\r\n        try {\r\n          // Determine if this is request or response\r\n          let isInput = false;\r\n          let isOutput = false;\r\n          if ((/Response$/).test(name)) {\r\n            isOutput = true;\r\n            name = name.replace(/Response$/, '');\r\n          } else if ((/Request$/).test(name)) {\r\n            isInput = true;\r\n            name = name.replace(/Request$/, '');\r\n          } else if ((/Solicit$/).test(name)) {\r\n            isInput = true;\r\n            name = name.replace(/Solicit$/, '');\r\n          }\r\n          // Look up the appropriate message as given in the portType's operations\r\n          let portTypes = self.definitions.portTypes;\r\n          let portTypeNames = Object.keys(portTypes);\r\n          // Currently this supports only one portType definition.\r\n          let portType = portTypes[portTypeNames[0]];\r\n          if (isInput) {\r\n            name = portType.methods[name].input.$name;\r\n          } else {\r\n            name = portType.methods[name].output.$name;\r\n          }\r\n          message = self.definitions.messages[name];\r\n          // 'cache' this alias to speed future lookups\r\n          self.definitions.messages[originalName] = self.definitions.messages[name];\r\n        } catch (e) {\r\n          if (self.options.returnFault) {\r\n            p.onerror(e);\r\n          }\r\n        }\r\n      }\r\n\r\n      topSchema = message.description(self.definitions);\r\n      objectName = originalName;\r\n    }\r\n\r\n    if (attrs.href) {\r\n      id = attrs.href.substr(1);\r\n      if (!refs[id]) {\r\n        refs[id] = { hrefs: [], obj: null };\r\n      }\r\n      refs[id].hrefs.push({ par: top.object, key: name, obj: obj });\r\n    }\r\n    if (id = attrs.id) {\r\n      if (!refs[id]) {\r\n        refs[id] = { hrefs: [], obj: null };\r\n      }\r\n    }\r\n\r\n    //Handle element attributes\r\n    for (attributeName in attrs) {\r\n      if (/^xmlns:|^xmlns$/.test(attributeName)) {\r\n        xmlns[splitQName(attributeName).name] = attrs[attributeName];\r\n        continue;\r\n      }\r\n      hasNonXmlnsAttribute = true;\r\n      elementAttributes[attributeName] = attrs[attributeName];\r\n    }\r\n\r\n    for (attributeName in elementAttributes) {\r\n      let res = splitQName(attributeName);\r\n      if (res.name === 'nil' && xmlns[res.prefix] === 'http://www.w3.org/2001/XMLSchema-instance' && elementAttributes[attributeName] &&\r\n        (elementAttributes[attributeName].toLowerCase() === 'true' || elementAttributes[attributeName] === '1')\r\n      ) {\r\n        hasNilAttribute = true;\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (hasNonXmlnsAttribute) {\r\n      obj[self.options.attributesKey] = elementAttributes;\r\n    }\r\n\r\n    // Pick up the schema for the type specified in element's xsi:type attribute.\r\n    let xsiTypeSchema;\r\n    let xsiType = elementAttributes['xsi:type'];\r\n    if (xsiType) {\r\n      let type = splitQName(xsiType);\r\n      let typeURI;\r\n      if (type.prefix === TNS_PREFIX) {\r\n        // In case of xsi:type = \"MyType\"\r\n        typeURI = xmlns[type.prefix] || xmlns.xmlns;\r\n      } else {\r\n        typeURI = xmlns[type.prefix];\r\n      }\r\n      let typeDef = self.findSchemaObject(typeURI, type.name);\r\n      if (typeDef) {\r\n        xsiTypeSchema = typeDef.description(self.definitions);\r\n      }\r\n    }\r\n\r\n    if (topSchema && topSchema[name + '[]']) {\r\n      name = name + '[]';\r\n    }\r\n    stack.push({\r\n      name: originalName,\r\n      object: obj,\r\n      schema: (xsiTypeSchema || (topSchema && topSchema[name])),\r\n      id: attrs.id,\r\n      nil: hasNilAttribute\r\n    });\r\n  };\r\n\r\n  p.onclosetag = function (nsName) {\r\n    let cur: any = stack.pop(),\r\n      obj = cur.object,\r\n      top = stack[stack.length - 1],\r\n      topObject = top.object,\r\n      topSchema = top.schema,\r\n      name = splitQName(nsName).name;\r\n\r\n    if (typeof cur.schema === 'string' && (cur.schema === 'string' || (<string>cur.schema).split(':')[1] === 'string')) {\r\n      if (typeof obj === 'object' && Object.keys(obj).length === 0) obj = cur.object = '';\r\n    }\r\n\r\n    if (cur.nil === true) {\r\n      if (self.options.handleNilAsNull) {\r\n        obj = null;\r\n      } else {\r\n        return;\r\n      }\r\n    }\r\n\r\n    if (_.isPlainObject(obj) && !Object.keys(obj).length) {\r\n      obj = null;\r\n    }\r\n\r\n    if (topSchema && topSchema[name + '[]']) {\r\n      if (!topObject[name]) {\r\n        topObject[name] = [];\r\n      }\r\n      topObject[name].push(obj);\r\n    } else if (name in topObject) {\r\n      if (!Array.isArray(topObject[name])) {\r\n        topObject[name] = [topObject[name]];\r\n      }\r\n      topObject[name].push(obj);\r\n    } else {\r\n      topObject[name] = obj;\r\n    }\r\n\r\n    if (cur.id) {\r\n      refs[cur.id].obj = obj;\r\n    }\r\n  };\r\n\r\n  p.oncdata = function (text) {\r\n    let originalText = text;\r\n    text = trim(text);\r\n    if (!text.length) {\r\n      return;\r\n    }\r\n\r\n    if (/<\\?xml[\\s\\S]+\\?>/.test(text)) {\r\n      let top = stack[stack.length - 1];\r\n      let value = self.xmlToObject(text);\r\n      if (top.object[self.options.attributesKey]) {\r\n        top.object[self.options.valueKey] = value;\r\n      } else {\r\n        top.object = value;\r\n      }\r\n    } else {\r\n      p.ontext(originalText);\r\n    }\r\n  };\r\n\r\n  p.onerror = function (e) {\r\n    p.resume();\r\n    throw {\r\n      Fault: {\r\n        faultcode: 500,\r\n        faultstring: 'Invalid XML',\r\n        detail: new Error(e).message,\r\n        statusCode: 500\r\n      }\r\n    };\r\n  };\r\n\r\n  p.ontext = function (text) {\r\n    let originalText = text;\r\n    text = trim(text);\r\n    if (!text.length) {\r\n      return;\r\n    }\r\n\r\n    let top = stack[stack.length - 1];\r\n    let name = splitQName(top.schema).name,\r\n      value;\r\n    if (self.options && self.options.customDeserializer && self.options.customDeserializer[name]) {\r\n      value = self.options.customDeserializer[name](text, top);\r\n    }\r\n    else {\r\n      if (name === 'int' || name === 'integer') {\r\n        value = parseInt(text, 10);\r\n      } else if (name === 'bool' || name === 'boolean') {\r\n        value = text.toLowerCase() === 'true' || text === '1';\r\n      } else if (name === 'dateTime' || name === 'date') {\r\n        value = new Date(text);\r\n      } else {\r\n        if (self.options.preserveWhitespace) {\r\n          text = originalText;\r\n        }\r\n        // handle string or other types\r\n        if (typeof top.object !== 'string') {\r\n          value = text;\r\n        } else {\r\n          value = top.object + text;\r\n        }\r\n      }\r\n    }\r\n\r\n    if (top.object[self.options.attributesKey]) {\r\n      top.object[self.options.valueKey] = value;\r\n    } else {\r\n      top.object = value;\r\n    }\r\n  };\r\n\r\n  if (typeof callback === 'function') {\r\n    // we be streaming\r\n    let saxStream = sax.createStream(true);\r\n    saxStream.on('opentag', p.onopentag);\r\n    saxStream.on('closetag', p.onclosetag);\r\n    saxStream.on('cdata', p.oncdata);\r\n    saxStream.on('text', p.ontext);\r\n    xml.pipe(saxStream)\r\n      .on('error', function (err) {\r\n        callback(err);\r\n      })\r\n      .on('end', function () {\r\n        let r;\r\n        try {\r\n          r = finish();\r\n        } catch (e) {\r\n          return callback(e);\r\n        }\r\n        callback(null, r);\r\n      });\r\n    return;\r\n  }\r\n  p.write(xml).close();\r\n\r\n  return finish();\r\n\r\n  function finish() {\r\n    // MultiRef support: merge objects instead of replacing\r\n    for (let n in refs) {\r\n      let ref = refs[n];\r\n      for (let i = 0; i < ref.hrefs.length; i++) {\r\n        _.assign(ref.hrefs[i].obj, ref.obj);\r\n      }\r\n    }\r\n\r\n    if (root.Envelope) {\r\n      let body = root.Envelope.Body;\r\n      let error: any;\r\n      if (body && body.Fault) {\r\n        if(!body.Fault.Code) {\r\n          let code = body.Fault.faultcode && body.Fault.faultcode.$value;\r\n          let string = body.Fault.faultstring && body.Fault.faultstring.$value;\r\n          let detail = body.Fault.detail && body.Fault.detail.$value;\r\n\r\n          code = code || body.Fault.faultcode;\r\n          string = string || body.Fault.faultstring;\r\n          detail = detail || body.Fault.detail;\r\n\r\n          let error: any = new Error(code + ': ' + string + (detail ? ': ' + detail : ''));\r\n        } else {\r\n          let code = body.Fault.Code.Value;\r\n          let string = body.Fault.Reason.Text.$value;\r\n          let detail = body.Fault.Detail.info;\r\n          error = new Error(code + ': ' + string + (detail ? ': ' + detail : ''));\r\n        }\r\n\r\n        error.root = root;\r\n        throw body.Fault;\r\n      }\r\n      return root.Envelope;\r\n    }\r\n    return root;\r\n  }\r\n};\r\n\r\n/**\r\n * Look up a XSD type or element by namespace URI and name\r\n * @param {String} nsURI Namespace URI\r\n * @param {String} qname Local or qualified name\r\n * @returns {*} The XSD type/element definition\r\n */\r\nWSDL.prototype.findSchemaObject = function (nsURI, qname) {\r\n  if (!nsURI || !qname) {\r\n    return null;\r\n  }\r\n\r\n  let def = null;\r\n\r\n  if (this.definitions.schemas) {\r\n    let schema = this.definitions.schemas[nsURI];\r\n    if (schema) {\r\n      if (qname.indexOf(':') !== -1) {\r\n        qname = qname.substring(qname.indexOf(':') + 1, qname.length);\r\n      }\r\n\r\n      // if the client passed an input element which has a `$lookupType` property instead of `$type`\r\n      // the `def` is found in `schema.elements`.\r\n      def = schema.complexTypes[qname] || schema.types[qname] || schema.elements[qname];\r\n    }\r\n  }\r\n\r\n  return def;\r\n};\r\n\r\n/**\r\n * Create document style xml string from the parameters\r\n * @param {String} name\r\n * @param {*} params\r\n * @param {String} nsPrefix\r\n * @param {String} nsURI\r\n * @param {String} type\r\n */\r\nWSDL.prototype.objectToDocumentXML = function (name, params, nsPrefix, nsURI, type) {\r\n  //If user supplies XML already, just use that.  XML Declaration should not be present.\r\n  if (params && params._xml) {\r\n    return params._xml;\r\n  }\r\n  let args = {};\r\n  args[name] = params;\r\n  let parameterTypeObj = type ? this.findSchemaObject(nsURI, type) : null;\r\n  return this.objectToXML(args, null, nsPrefix, nsURI, true, null, parameterTypeObj);\r\n};\r\n\r\n/**\r\n * Create RPC style xml string from the parameters\r\n * @param {String} name\r\n * @param {*} params\r\n * @param {String} nsPrefix\r\n * @param {String} nsURI\r\n * @returns {string}\r\n */\r\nWSDL.prototype.objectToRpcXML = function (name, params, nsPrefix, nsURI, isParts) {\r\n  let parts = [];\r\n  let defs = this.definitions;\r\n  let nsAttrName = '_xmlns';\r\n\r\n  nsPrefix = nsPrefix || findPrefix(defs.xmlns, nsURI);\r\n\r\n  nsURI = nsURI || defs.xmlns[nsPrefix];\r\n  nsPrefix = nsPrefix === TNS_PREFIX ? '' : (nsPrefix + ':');\r\n\r\n  parts.push(['<', nsPrefix, name, '>'].join(''));\r\n\r\n  for (let key in params) {\r\n    if (!params.hasOwnProperty(key)) {\r\n      continue;\r\n    }\r\n    if (key !== nsAttrName) {\r\n      let value = params[key];\r\n      let prefixedKey = (isParts ? '' : nsPrefix) + key;\r\n      let attributes = [];\r\n      if (typeof value === 'object' && value.hasOwnProperty(this.options.attributesKey)) {\r\n        let attrs = value[this.options.attributesKey];\r\n        for (let n in attrs) {\r\n          attributes.push(' ' + n + '=' + '\"' + attrs[n] + '\"');\r\n        }\r\n      }\r\n      parts.push(['<', prefixedKey].concat(attributes).concat('>').join(''));\r\n      parts.push((typeof value === 'object') ? this.objectToXML(value, key, nsPrefix, nsURI) : xmlEscape(value));\r\n      parts.push(['</', prefixedKey, '>'].join(''));\r\n    }\r\n  }\r\n  parts.push(['</', nsPrefix, name, '>'].join(''));\r\n  return parts.join('');\r\n};\r\n\r\n\r\nfunction appendColon(ns) {\r\n  return (ns && ns.charAt(ns.length - 1) !== ':') ? ns + ':' : ns;\r\n}\r\n\r\nfunction noColonNameSpace(ns) {\r\n  return (ns && ns.charAt(ns.length - 1) === ':') ? ns.substring(0, ns.length - 1) : ns;\r\n}\r\n\r\nWSDL.prototype.isIgnoredNameSpace = function (ns) {\r\n  return this.options.ignoredNamespaces.indexOf(ns) > -1;\r\n};\r\n\r\nWSDL.prototype.filterOutIgnoredNameSpace = function (ns) {\r\n  let namespace = noColonNameSpace(ns);\r\n  return this.isIgnoredNameSpace(namespace) ? '' : namespace;\r\n};\r\n\r\n\r\n\r\n/**\r\n * Convert an object to XML.  This is a recursive method as it calls itself.\r\n *\r\n * @param {Object} obj the object to convert.\r\n * @param {String} name the name of the element (if the object being traversed is\r\n * an element).\r\n * @param {String} nsPrefix the namespace prefix of the object I.E. xsd.\r\n * @param {String} nsURI the full namespace of the object I.E. http://w3.org/schema.\r\n * @param {Boolean} isFirst whether or not this is the first item being traversed.\r\n * @param {?} xmlnsAttr\r\n * @param {?} parameterTypeObject\r\n * @param {NamespaceContext} nsContext Namespace context\r\n */\r\nWSDL.prototype.objectToXML = function (obj, name, nsPrefix, nsURI, isFirst, xmlnsAttr, schemaObject, nsContext) {\r\n  let self = this;\r\n  let schema = this.definitions.schemas[nsURI];\r\n\r\n  let parentNsPrefix = nsPrefix ? nsPrefix.parent : undefined;\r\n  if (typeof parentNsPrefix !== 'undefined') {\r\n    //we got the parentNsPrefix for our array. setting the namespace-letiable back to the current namespace string\r\n    nsPrefix = nsPrefix.current;\r\n  }\r\n\r\n  parentNsPrefix = noColonNameSpace(parentNsPrefix);\r\n  if (this.isIgnoredNameSpace(parentNsPrefix)) {\r\n    parentNsPrefix = '';\r\n  }\r\n\r\n  let soapHeader = !schema;\r\n  let qualified = schema && schema.$elementFormDefault === 'qualified';\r\n  let parts = [];\r\n  let prefixNamespace = (nsPrefix || qualified) && nsPrefix !== TNS_PREFIX;\r\n\r\n  let xmlnsAttrib = '';\r\n  if (nsURI && isFirst) {\r\n    if (self.options.overrideRootElement && self.options.overrideRootElement.xmlnsAttributes) {\r\n      self.options.overrideRootElement.xmlnsAttributes.forEach(function (attribute) {\r\n        xmlnsAttrib += ' ' + attribute.name + '=\"' + attribute.value + '\"';\r\n      });\r\n    } else {\r\n      if (prefixNamespace && !this.isIgnoredNameSpace(nsPrefix)) {\r\n        // resolve the prefix namespace\r\n        xmlnsAttrib += ' xmlns:' + nsPrefix + '=\"' + nsURI + '\"';\r\n      }\r\n      // only add default namespace if the schema elementFormDefault is qualified\r\n      if (qualified || soapHeader) xmlnsAttrib += ' xmlns=\"' + nsURI + '\"';\r\n    }\r\n  }\r\n\r\n  if (!nsContext) {\r\n    nsContext = new NamespaceContext();\r\n    nsContext.declareNamespace(nsPrefix, nsURI);\r\n  } else {\r\n    nsContext.pushContext();\r\n  }\r\n\r\n  // explicitly use xmlns attribute if available\r\n  if (xmlnsAttr && !(self.options.overrideRootElement && self.options.overrideRootElement.xmlnsAttributes)) {\r\n    xmlnsAttrib = xmlnsAttr;\r\n  }\r\n\r\n  let ns = '';\r\n\r\n  if (self.options.overrideRootElement && isFirst) {\r\n    ns = self.options.overrideRootElement.namespace;\r\n  } else if (prefixNamespace && (qualified || isFirst || soapHeader) && !this.isIgnoredNameSpace(nsPrefix)) {\r\n    ns = nsPrefix;\r\n  }\r\n\r\n  let i, n;\r\n  // start building out XML string.\r\n  if (Array.isArray(obj)) {\r\n    for (i = 0, n = obj.length; i < n; i++) {\r\n      let item = obj[i];\r\n      let arrayAttr = self.processAttributes(item, nsContext),\r\n        correctOuterNsPrefix = parentNsPrefix || ns; //using the parent namespace prefix if given\r\n\r\n      let body = self.objectToXML(item, name, nsPrefix, nsURI, false, null, schemaObject, nsContext);\r\n\r\n      let openingTagParts = ['<', appendColon(correctOuterNsPrefix), name, arrayAttr, xmlnsAttrib];\r\n\r\n      if (body === '' && self.options.useEmptyTag) {\r\n        // Use empty (self-closing) tags if no contents\r\n        openingTagParts.push(' />');\r\n        parts.push(openingTagParts.join(''));\r\n      } else {\r\n        openingTagParts.push('>');\r\n        if (self.options.namespaceArrayElements || i === 0) {\r\n          parts.push(openingTagParts.join(''));\r\n        }\r\n        parts.push(body);\r\n        if (self.options.namespaceArrayElements || i === n - 1) {\r\n          parts.push(['</', appendColon(correctOuterNsPrefix), name, '>'].join(''));\r\n        }\r\n      }\r\n    }\r\n  } else if (typeof obj === 'object') {\r\n    for (name in obj) {\r\n      if (!obj.hasOwnProperty(name)) continue;\r\n      //don't process attributes as element\r\n      if (name === self.options.attributesKey) {\r\n        continue;\r\n      }\r\n      //Its the value of a xml object. Return it directly.\r\n      if (name === self.options.xmlKey) {\r\n        nsContext.popContext();\r\n        return obj[name];\r\n      }\r\n      //Its the value of an item. Return it directly.\r\n      if (name === self.options.valueKey) {\r\n        nsContext.popContext();\r\n        return xmlEscape(obj[name]);\r\n      }\r\n\r\n      let child = obj[name];\r\n      if (typeof child === 'undefined') {\r\n        continue;\r\n      }\r\n\r\n      let attr = self.processAttributes(child, nsContext);\r\n\r\n      let value = '';\r\n      let nonSubNameSpace = '';\r\n      let emptyNonSubNameSpace = false;\r\n\r\n      let nameWithNsRegex = /^([^:]+):([^:]+)$/.exec(name);\r\n      if (nameWithNsRegex) {\r\n        nonSubNameSpace = nameWithNsRegex[1] + ':';\r\n        name = nameWithNsRegex[2];\r\n      } else if (name[0] === ':') {\r\n        emptyNonSubNameSpace = true;\r\n        name = name.substr(1);\r\n      }\r\n\r\n      if (isFirst) {\r\n        value = self.objectToXML(child, name, nsPrefix, nsURI, false, null, schemaObject, nsContext);\r\n      } else {\r\n\r\n        if (self.definitions.schemas) {\r\n          if (schema) {\r\n            let childSchemaObject = self.findChildSchemaObject(schemaObject, name);\r\n            //find sub namespace if not a primitive\r\n            if (childSchemaObject &&\r\n              ((childSchemaObject.$type && (childSchemaObject.$type.indexOf('xsd:') === -1)) ||\r\n                childSchemaObject.$ref || childSchemaObject.$name)) {\r\n              /*if the base name space of the children is not in the ingoredSchemaNamspaces we use it.\r\n               This is because in some services the child nodes do not need the baseNameSpace.\r\n               */\r\n\r\n              let childNsPrefix: any = '';\r\n              let childName = '';\r\n              let childNsURI;\r\n              let childXmlnsAttrib = '';\r\n\r\n              let elementQName = childSchemaObject.$ref || childSchemaObject.$name;\r\n              if (elementQName) {\r\n                elementQName = splitQName(elementQName);\r\n                childName = elementQName.name;\r\n                if (elementQName.prefix === TNS_PREFIX) {\r\n                  // Local element\r\n                  childNsURI = childSchemaObject.$targetNamespace;\r\n                  childNsPrefix = nsContext.registerNamespace(childNsURI);\r\n                  if (this.isIgnoredNameSpace(childNsPrefix)) {\r\n                    childNsPrefix = nsPrefix;\r\n                  }\r\n                } else {\r\n                  childNsPrefix = elementQName.prefix;\r\n                  if (this.isIgnoredNameSpace(childNsPrefix)) {\r\n                    childNsPrefix = nsPrefix;\r\n                  }\r\n                  childNsURI = schema.xmlns[childNsPrefix] || self.definitions.xmlns[childNsPrefix];\r\n                }\r\n\r\n                let unqualified = false;\r\n                // Check qualification form for local elements\r\n                if (childSchemaObject.$name && childSchemaObject.targetNamespace === undefined) {\r\n                  if (childSchemaObject.$form === 'unqualified') {\r\n                    unqualified = true;\r\n                  } else if (childSchemaObject.$form === 'qualified') {\r\n                    unqualified = false;\r\n                  } else {\r\n                    unqualified = schema.$elementFormDefault !== 'qualified';\r\n                  }\r\n                }\r\n                if (unqualified) {\r\n                  childNsPrefix = '';\r\n                }\r\n\r\n                if (childNsURI && childNsPrefix) {\r\n                  if (nsContext.declareNamespace(childNsPrefix, childNsURI)) {\r\n                    childXmlnsAttrib = ' xmlns:' + childNsPrefix + '=\"' + childNsURI + '\"';\r\n                    xmlnsAttrib += childXmlnsAttrib;\r\n                  }\r\n                }\r\n              }\r\n\r\n              let resolvedChildSchemaObject;\r\n              if (childSchemaObject.$type) {\r\n                let typeQName = splitQName(childSchemaObject.$type);\r\n                let typePrefix = typeQName.prefix;\r\n                let typeURI = schema.xmlns[typePrefix] || self.definitions.xmlns[typePrefix];\r\n                childNsURI = typeURI;\r\n                if (typeURI !== 'http://www.w3.org/2001/XMLSchema' && typePrefix !== TNS_PREFIX) {\r\n                  // Add the prefix/namespace mapping, but not declare it\r\n                  nsContext.addNamespace(typePrefix, typeURI);\r\n                }\r\n                resolvedChildSchemaObject =\r\n                  self.findSchemaType(typeQName.name, typeURI) || childSchemaObject;\r\n              } else {\r\n                resolvedChildSchemaObject =\r\n                  self.findSchemaObject(childNsURI, childName) || childSchemaObject;\r\n              }\r\n\r\n              if (childSchemaObject.$baseNameSpace && this.options.ignoreBaseNameSpaces) {\r\n                childNsPrefix = nsPrefix;\r\n                childNsURI = nsURI;\r\n              }\r\n\r\n              if (this.options.ignoreBaseNameSpaces) {\r\n                childNsPrefix = '';\r\n                childNsURI = '';\r\n              }\r\n\r\n              ns = childNsPrefix;\r\n\r\n              if (Array.isArray(child)) {\r\n                //for arrays, we need to remember the current namespace\r\n                childNsPrefix = {\r\n                  current: childNsPrefix,\r\n                  parent: ns\r\n                };\r\n              } else {\r\n                //parent (array) already got the namespace\r\n                childXmlnsAttrib = null;\r\n              }\r\n\r\n              value = self.objectToXML(child, name, childNsPrefix, childNsURI,\r\n                false, childXmlnsAttrib, resolvedChildSchemaObject, nsContext);\r\n            } else if (obj[self.options.attributesKey] && obj[self.options.attributesKey].xsi_type) {\r\n              //if parent object has complex type defined and child not found in parent\r\n              let completeChildParamTypeObject = self.findChildSchemaObject(\r\n                obj[self.options.attributesKey].xsi_type.type,\r\n                obj[self.options.attributesKey].xsi_type.xmlns);\r\n\r\n              nonSubNameSpace = obj[self.options.attributesKey].xsi_type.prefix;\r\n              nsContext.addNamespace(obj[self.options.attributesKey].xsi_type.prefix,\r\n                obj[self.options.attributesKey].xsi_type.xmlns);\r\n              value = self.objectToXML(child, name, obj[self.options.attributesKey].xsi_type.prefix,\r\n                obj[self.options.attributesKey].xsi_type.xmlns, false, null, null, nsContext);\r\n            } else {\r\n              if (Array.isArray(child)) {\r\n                name = nonSubNameSpace + name;\r\n              }\r\n\r\n              value = self.objectToXML(child, name, nsPrefix, nsURI, false, null, null, nsContext);\r\n            }\r\n          } else {\r\n            value = self.objectToXML(child, name, nsPrefix, nsURI, false, null, null, nsContext);\r\n          }\r\n        }\r\n      }\r\n\r\n      ns = noColonNameSpace(ns);\r\n      if (prefixNamespace && !qualified && isFirst && !self.options.overrideRootElement) {\r\n        ns = nsPrefix;\r\n      } else if (this.isIgnoredNameSpace(ns)) {\r\n        ns = '';\r\n      }\r\n\r\n      let useEmptyTag = !value && self.options.useEmptyTag;\r\n      if (!Array.isArray(child)) {\r\n        // start tag\r\n        parts.push(['<', emptyNonSubNameSpace ? '' : appendColon(nonSubNameSpace || ns), name, attr, xmlnsAttrib,\r\n          (child === null ? ' xsi:nil=\"true\"' : ''),\r\n          useEmptyTag ? ' />' : '>'\r\n        ].join(''));\r\n      }\r\n\r\n      if (!useEmptyTag) {\r\n        parts.push(value);\r\n        if (!Array.isArray(child)) {\r\n          // end tag\r\n          parts.push(['</', emptyNonSubNameSpace ? '' : appendColon(nonSubNameSpace || ns), name, '>'].join(''));\r\n        }\r\n      }\r\n    }\r\n  } else if (obj !== undefined) {\r\n    parts.push((self.options.escapeXML) ? xmlEscape(obj) : obj);\r\n  }\r\n  nsContext.popContext();\r\n  return parts.join('');\r\n};\r\n\r\nWSDL.prototype.processAttributes = function (child, nsContext) {\r\n  let attr = '';\r\n\r\n  if (child === null) {\r\n    child = [];\r\n  }\r\n\r\n  let attrObj = child[this.options.attributesKey];\r\n  if (attrObj && attrObj.xsi_type) {\r\n    let xsiType = attrObj.xsi_type;\r\n\r\n    let prefix = xsiType.prefix || xsiType.namespace;\r\n    // Generate a new namespace for complex extension if one not provided\r\n    if (!prefix) {\r\n      prefix = nsContext.registerNamespace(xsiType.xmlns);\r\n    } else {\r\n      nsContext.declareNamespace(prefix, xsiType.xmlns);\r\n    }\r\n    xsiType.prefix = prefix;\r\n  }\r\n\r\n\r\n  if (attrObj) {\r\n    for (let attrKey in attrObj) {\r\n      //handle complex extension separately\r\n      if (attrKey === 'xsi_type') {\r\n        let attrValue = attrObj[attrKey];\r\n        attr += ' xsi:type=\"' + attrValue.prefix + ':' + attrValue.type + '\"';\r\n        attr += ' xmlns:' + attrValue.prefix + '=\"' + attrValue.xmlns + '\"';\r\n\r\n        continue;\r\n      } else {\r\n        attr += ' ' + attrKey + '=\"' + xmlEscape(attrObj[attrKey]) + '\"';\r\n      }\r\n    }\r\n  }\r\n\r\n  return attr;\r\n};\r\n\r\n/**\r\n * Look up a schema type definition\r\n * @param name\r\n * @param nsURI\r\n * @returns {*}\r\n */\r\nWSDL.prototype.findSchemaType = function (name, nsURI) {\r\n  if (!this.definitions.schemas || !name || !nsURI) {\r\n    return null;\r\n  }\r\n\r\n  let schema = this.definitions.schemas[nsURI];\r\n  if (!schema || !schema.complexTypes) {\r\n    return null;\r\n  }\r\n\r\n  return schema.complexTypes[name];\r\n};\r\n\r\nWSDL.prototype.findChildSchemaObject = function (parameterTypeObj, childName, backtrace) {\r\n  if (!parameterTypeObj || !childName) {\r\n    return null;\r\n  }\r\n\r\n  if (!backtrace) {\r\n    backtrace = [];\r\n  }\r\n\r\n  if (backtrace.indexOf(parameterTypeObj) >= 0) {\r\n    // We've recursed back to ourselves; break.\r\n    return null;\r\n  } else {\r\n    backtrace = backtrace.concat([parameterTypeObj]);\r\n  }\r\n\r\n  let found = null,\r\n    i = 0,\r\n    child,\r\n    ref;\r\n\r\n  if (Array.isArray(parameterTypeObj.$lookupTypes) && parameterTypeObj.$lookupTypes.length) {\r\n    let types = parameterTypeObj.$lookupTypes;\r\n\r\n    for (i = 0; i < types.length; i++) {\r\n      let typeObj = types[i];\r\n\r\n      if (typeObj.$name === childName) {\r\n        found = typeObj;\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  let object = parameterTypeObj;\r\n  if (object.$name === childName && object.name === 'element') {\r\n    return object;\r\n  }\r\n  if (object.$ref) {\r\n    ref = splitQName(object.$ref);\r\n    if (ref.name === childName) {\r\n      return object;\r\n    }\r\n  }\r\n\r\n  let childNsURI;\r\n\r\n  // want to avoid unecessary recursion to improve performance\r\n  if (object.$type && backtrace.length === 1) {\r\n    let typeInfo = splitQName(object.$type);\r\n    if (typeInfo.prefix === TNS_PREFIX) {\r\n      childNsURI = parameterTypeObj.$targetNamespace;\r\n    } else {\r\n      childNsURI = this.definitions.xmlns[typeInfo.prefix];\r\n    }\r\n    let typeDef = this.findSchemaType(typeInfo.name, childNsURI);\r\n    if (typeDef) {\r\n      return this.findChildSchemaObject(typeDef, childName, backtrace);\r\n    }\r\n  }\r\n\r\n  if (object.children) {\r\n    for (i = 0, child; child = object.children[i]; i++) {\r\n      found = this.findChildSchemaObject(child, childName, backtrace);\r\n      if (found) {\r\n        break;\r\n      }\r\n\r\n      if (child.$base) {\r\n        let baseQName = splitQName(child.$base);\r\n        let childNameSpace = baseQName.prefix === TNS_PREFIX ? '' : baseQName.prefix;\r\n        childNsURI = child.xmlns[baseQName.prefix] || this.definitions.xmlns[baseQName.prefix];\r\n\r\n        let foundBase = this.findSchemaType(baseQName.name, childNsURI);\r\n\r\n        if (foundBase) {\r\n          found = this.findChildSchemaObject(foundBase, childName, backtrace);\r\n\r\n          if (found) {\r\n            found.$baseNameSpace = childNameSpace;\r\n            found.$type = childNameSpace + ':' + childName;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  if (!found && object.$name === childName) {\r\n    return object;\r\n  }\r\n\r\n  return found;\r\n};\r\n\r\nWSDL.prototype._parse = function (xml) {\r\n  let self = this,\r\n    p = sax.parser(true),\r\n    stack = [],\r\n    root = null,\r\n    types = null,\r\n    schema = null,\r\n    options = self.options;\r\n\r\n  p.onopentag = function (node) {\r\n    let nsName = node.name;\r\n    let attrs = node.attributes;\r\n\r\n    let top = stack[stack.length - 1];\r\n    let name;\r\n    if (top) {\r\n      try {\r\n        top.startElement(stack, nsName, attrs, options);\r\n      } catch (e) {\r\n        if (self.options.strict) {\r\n          throw e;\r\n        } else {\r\n          stack.push(new Element(nsName, attrs, options));\r\n        }\r\n      }\r\n    } else {\r\n      name = splitQName(nsName).name;\r\n      if (name === 'definitions') {\r\n        root = new DefinitionsElement(nsName, attrs, options);\r\n        stack.push(root);\r\n      } else if (name === 'schema') {\r\n        // Shim a structure in here to allow the proper objects to be created when merging back.\r\n        root = new DefinitionsElement('definitions', {}, {});\r\n        types = new TypesElement('types', {}, {});\r\n        schema = new SchemaElement(nsName, attrs, options);\r\n        types.addChild(schema);\r\n        root.addChild(types);\r\n        stack.push(schema);\r\n      } else {\r\n        throw new Error('Unexpected root element of WSDL or include');\r\n      }\r\n    }\r\n  };\r\n\r\n  p.onclosetag = function (name) {\r\n    let top = stack[stack.length - 1];\r\n    assert(top, 'Unmatched close tag: ' + name);\r\n\r\n    top.endElement(stack, name);\r\n  };\r\n\r\n  p.write(xml).close();\r\n\r\n  return root;\r\n};\r\n\r\nWSDL.prototype._fromXML = function (xml) {\r\n  this.definitions = this._parse(xml);\r\n  this.definitions.descriptions = {\r\n    types: {}\r\n  };\r\n  this.xml = xml;\r\n};\r\n\r\nWSDL.prototype._fromServices = function (services) {\r\n\r\n};\r\n\r\n\r\n\r\nWSDL.prototype._xmlnsMap = function () {\r\n  let xmlns = this.definitions.xmlns;\r\n  let str = '';\r\n  for (let alias in xmlns) {\r\n    if (alias === '' || alias === TNS_PREFIX) {\r\n      continue;\r\n    }\r\n    let ns = xmlns[alias];\r\n    switch (ns) {\r\n      case \"http://xml.apache.org/xml-soap\": // apachesoap\r\n      case \"http://schemas.xmlsoap.org/wsdl/\": // wsdl\r\n      case \"http://schemas.xmlsoap.org/wsdl/soap/\": // wsdlsoap\r\n      case \"http://schemas.xmlsoap.org/wsdl/soap12/\": // wsdlsoap12\r\n      case \"http://schemas.xmlsoap.org/soap/encoding/\": // soapenc\r\n      case \"http://www.w3.org/2001/XMLSchema\": // xsd\r\n        continue;\r\n    }\r\n    if (~ns.indexOf('http://schemas.xmlsoap.org/')) {\r\n      continue;\r\n    }\r\n    if (~ns.indexOf('http://www.w3.org/')) {\r\n      continue;\r\n    }\r\n    if (~ns.indexOf('http://xml.apache.org/')) {\r\n      continue;\r\n    }\r\n    str += ' xmlns:' + alias + '=\"' + ns + '\"';\r\n  }\r\n  return str;\r\n};\r\n\r\n/*\r\n * Have another function to load previous WSDLs as we\r\n * don't want this to be invoked externally (expect for tests)\r\n * This will attempt to fix circular dependencies with XSD files,\r\n * Given\r\n * - file.wsdl\r\n *   - xs:import namespace=\"A\" schemaLocation: A.xsd\r\n * - A.xsd\r\n *   - xs:import namespace=\"B\" schemaLocation: B.xsd\r\n * - B.xsd\r\n *   - xs:import namespace=\"A\" schemaLocation: A.xsd\r\n * file.wsdl will start loading, import A, then A will import B, which will then import A\r\n * Because A has already started to load previously it will be returned right away and\r\n * have an internal circular reference\r\n * B would then complete loading, then A, then file.wsdl\r\n * By the time file A starts processing its includes its definitions will be already loaded,\r\n * this is the only thing that B will depend on when \"opening\" A\r\n */\r\nfunction open_wsdl_recursive(uri, options): Promise<any> {\r\n  let fromCache,\r\n    WSDL_CACHE;\r\n\r\n  // if (typeof options === 'function') {\r\n  //   callback = options;\r\n  //   options = {};\r\n  // }\r\n\r\n  WSDL_CACHE = options.WSDL_CACHE;\r\n\r\n  if (fromCache = WSDL_CACHE[uri]) {\r\n    // return callback.call(fromCache, null, fromCache);\r\n    return fromCache;\r\n  }\r\n\r\n  return open_wsdl(uri, options);\r\n}\r\n\r\nexport async function open_wsdl(uri, options): Promise<any> {\r\n  // if (typeof options === 'function') {\r\n  //   callback = options;\r\n  //   options = {};\r\n  // }\r\n\r\n  // initialize cache when calling open_wsdl directly\r\n  let WSDL_CACHE = options.WSDL_CACHE || {};\r\n  let request_headers = options.wsdl_headers;\r\n  let request_options = options.wsdl_options;\r\n\r\n  // let wsdl;\r\n  // if (!/^https?:/.test(uri)) {\r\n  //   // debug('Reading file: %s', uri);\r\n  //   // fs.readFile(uri, 'utf8', function(err, definition) {\r\n  //   //   if (err) {\r\n  //   //     callback(err);\r\n  //   //   }\r\n  //   //   else {\r\n  //   //     wsdl = new WSDL(definition, uri, options);\r\n  //   //     WSDL_CACHE[ uri ] = wsdl;\r\n  //   //     wsdl.WSDL_CACHE = WSDL_CACHE;\r\n  //   //     wsdl.onReady(callback);\r\n  //   //   }\r\n  //   // });\r\n  // }\r\n  // else {\r\n  //   debug('Reading url: %s', uri);\r\n  //   let httpClient = options.httpClient || new HttpClient(options);\r\n  //   httpClient.request(uri, null /* options */, function(err, response, definition) {\r\n  //     if (err) {\r\n  //       callback(err);\r\n  //     } else if (response && response.statusCode === 200) {\r\n  //       wsdl = new WSDL(definition, uri, options);\r\n  //       WSDL_CACHE[ uri ] = wsdl;\r\n  //       wsdl.WSDL_CACHE = WSDL_CACHE;\r\n  //       wsdl.onReady(callback);\r\n  //     } else {\r\n  //       callback(new Error('Invalid WSDL URL: ' + uri + \"\\n\\n\\r Code: \" + response.statusCode + \"\\n\\n\\r Response Body: \" + response.body));\r\n  //     }\r\n  //   }, request_headers, request_options);\r\n  // }\r\n  // return wsdl;\r\n\r\n  const httpClient: HttpClient = options.httpClient;\r\n  const wsdlDef = await httpClient.get(uri, { responseType: 'text' }).toPromise();\r\n  const wsdlObj = await new Promise((resolve) => {\r\n    const wsdl = new WSDL(wsdlDef, uri, options);\r\n    WSDL_CACHE[uri] = wsdl;\r\n    wsdl.WSDL_CACHE = WSDL_CACHE;\r\n    wsdl.onReady(resolve(wsdl));\r\n  });\r\n  return wsdlObj;\r\n}\r\n","import * as _ from 'lodash';\r\nimport { Buffer } from 'buffer';\r\n\r\nexport function BasicAuthSecurity(username, password, defaults) {\r\n  this._username = username;\r\n  this._password = password;\r\n  this.defaults = {};\r\n  _.merge(this.defaults, defaults);\r\n}\r\n\r\nBasicAuthSecurity.prototype.addHeaders = function(headers) {\r\n  headers.Authorization = 'Basic ' + new Buffer((this._username + ':' + this._password) || '').toString('base64');\r\n};\r\n\r\nBasicAuthSecurity.prototype.toXML = function() {\r\n  return '';\r\n};\r\n\r\nBasicAuthSecurity.prototype.addOptions = function(options) {\r\n  _.merge(options, this.defaults);\r\n};\r\n","\"use strict\";\r\n\r\n// var crypto = require('crypto');\r\nimport sha1 from 'crypto-js/sha1';\r\nimport Base64 from 'crypto-js/enc-base64';\r\n\r\n// var passwordDigest = require('../utils').passwordDigest;\r\nimport { passwordDigest } from '../utils';\r\n\r\nvar validPasswordTypes = ['PasswordDigest', 'PasswordText'];\r\n\r\nexport function WSSecurity(username, password, options) {\r\n  options = options || {};\r\n  this._username = username;\r\n  this._password = password;\r\n  //must account for backward compatibility for passwordType String param as well as object options defaults: passwordType = 'PasswordText', hasTimeStamp = true   \r\n  if (typeof options === 'string') {\r\n    this._passwordType = options ? options : 'PasswordText';\r\n    options = {};\r\n  } else {\r\n    this._passwordType = options.passwordType ? options.passwordType : 'PasswordText';\r\n  }\r\n\r\n  if (validPasswordTypes.indexOf(this._passwordType) === -1) {\r\n    this._passwordType = 'PasswordText';\r\n  }\r\n\r\n  this._hasTimeStamp = options.hasTimeStamp || typeof options.hasTimeStamp === 'boolean' ? !!options.hasTimeStamp : true;\r\n  /*jshint eqnull:true */\r\n  if (options.hasNonce != null) {\r\n    this._hasNonce = !!options.hasNonce;\r\n  }\r\n  this._hasTokenCreated = options.hasTokenCreated || typeof options.hasTokenCreated === 'boolean' ? !!options.hasTokenCreated : true;\r\n  if (options.actor != null) {\r\n    this._actor = options.actor;\r\n  }\r\n  if (options.mustUnderstand != null) {\r\n    this._mustUnderstand = !!options.mustUnderstand;\r\n  }\r\n}\r\n\r\nWSSecurity.prototype.toXML = function() {\r\n  // avoid dependency on date formatting libraries\r\n  function getDate(d) {\r\n    function pad(n) {\r\n      return n < 10 ? '0' + n : n;\r\n    }\r\n    return d.getUTCFullYear() + '-'\r\n      + pad(d.getUTCMonth() + 1) + '-'\r\n      + pad(d.getUTCDate()) + 'T'\r\n      + pad(d.getUTCHours()) + ':'\r\n      + pad(d.getUTCMinutes()) + ':'\r\n      + pad(d.getUTCSeconds()) + 'Z';\r\n  }\r\n  var now = new Date();\r\n  var created = getDate(now);\r\n  var timeStampXml = '';\r\n  if (this._hasTimeStamp) {\r\n    var expires = getDate( new Date(now.getTime() + (1000 * 600)) );\r\n    timeStampXml = \"<wsu:Timestamp wsu:Id=\\\"Timestamp-\"+created+\"\\\">\" +\r\n      \"<wsu:Created>\"+created+\"</wsu:Created>\" +\r\n      \"<wsu:Expires>\"+expires+\"</wsu:Expires>\" +\r\n      \"</wsu:Timestamp>\";\r\n  }\r\n\r\n  var password, nonce;\r\n  if (this._hasNonce || this._passwordType !== 'PasswordText') {\r\n    // nonce = base64 ( sha1 ( created + random ) )\r\n    // var nHash = crypto.createHash('sha1');\r\n    // nHash.update(created + Math.random());\r\n    // nonce = nHash.digest('base64');\r\n    nonce = Base64.stringify(sha1(created + Math.random(), ''));\r\n  }\r\n  if (this._passwordType === 'PasswordText') {\r\n    password = \"<wsse:Password Type=\\\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText\\\">\" + this._password + \"</wsse:Password>\";\r\n    if (nonce) {\r\n      password += \"<wsse:Nonce EncodingType=\\\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary\\\">\" + nonce + \"</wsse:Nonce>\";\r\n    }\r\n  } else {\r\n    password = \"<wsse:Password Type=\\\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest\\\">\" + passwordDigest(nonce, created, this._password) + \"</wsse:Password>\" +\r\n      \"<wsse:Nonce EncodingType=\\\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary\\\">\" + nonce + \"</wsse:Nonce>\";\r\n  }\r\n\r\n  return \"<wsse:Security \" + (this._actor ? \"soap:actor=\\\"\" + this._actor + \"\\\" \" : \"\") +\r\n    (this._mustUnderstand ? \"soap:mustUnderstand=\\\"1\\\" \" : \"\") +\r\n    \"xmlns:wsse=\\\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd\\\" xmlns:wsu=\\\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\\\">\" +\r\n    timeStampXml +\r\n    \"<wsse:UsernameToken xmlns:wsu=\\\"http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd\\\" wsu:Id=\\\"SecurityToken-\" + created + \"\\\">\" +\r\n    \"<wsse:Username>\" + this._username + \"</wsse:Username>\" +\r\n    password +\r\n    (this._hasTokenCreated ? \"<wsu:Created>\" + created + \"</wsu:Created>\" : \"\") +\r\n    \"</wsse:UsernameToken>\" +\r\n    \"</wsse:Security>\";\r\n};\r\n\r\n// module.exports = WSSecurity;\r\n","\"use strict\";\r\n\r\n// var _ = require('lodash');\r\nimport * as _ from 'lodash';\r\n\r\nexport function BearerSecurity(token, defaults) {\r\n\tthis._token = token;\r\n\tthis.defaults = {};\r\n\t_.merge(this.defaults, defaults);\r\n}\r\n\r\nBearerSecurity.prototype.addHeaders = function(headers) {\r\n\theaders.Authorization = \"Bearer \" + this._token;\r\n};\r\n\r\nBearerSecurity.prototype.toXML = function() {\r\n\treturn '';\r\n};\r\n\r\nBearerSecurity.prototype.addOptions = function(options) {\r\n  _.merge(options, this.defaults);\r\n};\r\n\r\n// module.exports = BearerSecurity;\r\n","\"use strict\";\r\n\r\n// var _ = require('lodash');\r\nimport * as _ from 'lodash';\r\n\r\nexport function NTLMSecurity(username, password, domain, workstation) {\r\n  if (typeof username === \"object\") {\r\n    this.defaults = username;\r\n    this.defaults.ntlm = true;\r\n  } else {\r\n    this.defaults = {\r\n      ntlm: true,\r\n      username: username,\r\n      password: password,\r\n      domain: domain,\r\n      workstation: workstation\r\n    };\r\n  }\r\n}\r\n\r\nNTLMSecurity.prototype.addHeaders = function (headers) {\r\n  headers.Connection = 'keep-alive';\r\n};\r\n\r\nNTLMSecurity.prototype.toXML = function () {\r\n  return '';\r\n};\r\n\r\nNTLMSecurity.prototype.addOptions = function (options) {\r\n  _.merge(options, this.defaults);\r\n};\r\n\r\n// module.exports = NTLMSecurity;\r\n","\"use strict\";\r\n\r\nimport {Â BasicAuthSecurity } from './BasicAuthSecurity';\r\nimport { WSSecurity } from './WSSecurity';\r\n// import { WSSecurityCert } from './WSSecurityCert';\r\nimport { BearerSecurity } from './BearerSecurity';\r\nimport { NTLMSecurity } from './NTLMSecurity';\r\n\r\nexport const security = { \r\n  BasicAuthSecurity,\r\n  BearerSecurity,\r\n  WSSecurity,\r\n  // WSSecurityCert,\r\n  NTLMSecurity,\r\n  // ClientSSLSecurity,\r\n  // ClientSSLSecurityPFX\r\n};","export class Multipart  {\r\n  preambleCRLF = true;\r\n  postambleCRLF = true;\r\n\r\n  build(parts, boundary) {\r\n    const body = [];\r\n\r\n    function add (part) {\r\n      if (typeof part === 'number') {\r\n        part = part.toString();\r\n      }\r\n      return body.push(part)\r\n    }\r\n\r\n    if (this.preambleCRLF) {\r\n      add('\\r\\n')\r\n    }\r\n\r\n    parts.forEach(function (part) {\r\n      let preamble = '--' + boundary + '\\r\\n';\r\n      Object.keys(part).forEach(function (key) {\r\n        if (key === 'body') { return }\r\n        preamble += key + ': ' + part[key] + '\\r\\n'\r\n      });\r\n      preamble += '\\r\\n';\r\n      add(preamble);\r\n      add(part.body);\r\n      add('\\r\\n');\r\n    });\r\n    add('--' + boundary + '--');\r\n\r\n    if (this.postambleCRLF) {\r\n      add('\\r\\n');\r\n    }\r\n\r\n    const size = body.map((part) => {\r\n      if (typeof part === 'string') {\r\n        return part.length\r\n      } else {\r\n        return part.byteLength;\r\n      }\r\n    }).reduce((a, b) => a + b, 0);\r\n\r\n    let uint8array = new Uint8Array(size);\r\n    let i = 0;\r\n    body.forEach((part) => {\r\n      if (typeof part === 'string') {\r\n        for (let j = 0; j < part.length; i++, j++) {\r\n          uint8array[i] = part.charCodeAt(j) & 0xff;\r\n        }\r\n      } else {\r\n        for (let j = 0; j < part.byteLength; i++, j++) {\r\n          uint8array[i] = part[j];\r\n        }\r\n      }\r\n    });\r\n    return uint8array.buffer;\r\n  }\r\n\r\n}\r\n","export class SoapAttachment {\r\n\r\n  constructor(\r\n    public mimetype: string,\r\n    public contentId: string,\r\n    public name: string,\r\n    public body: any\r\n  ) {\r\n\r\n  }\r\n\r\n  static fromFormFiles(files: FileList | File[] = []): Promise<any> {\r\n    if (files instanceof FileList) {\r\n      files = Array.from(files);\r\n    }\r\n\r\n    const promises = files.map((file: any) => {\r\n      return new Promise(function(resolve) {\r\n        const reader = new FileReader();\r\n        reader.readAsArrayBuffer(file);\r\n        reader.onload = function (e) {\r\n          const arrayBuffer = (e.target as any).result;\r\n          const bytes = new Uint8Array(arrayBuffer);\r\n          const attachment = new SoapAttachment(file.type, file.contentId || file.name, file.name, bytes);\r\n          resolve(attachment);\r\n        }\r\n      });\r\n    });\r\n\r\n   return Promise.all(promises);\r\n  }\r\n\r\n}\r\n","/*\r\n * Copyright (c) 2011 Vinay Pulim <vinay@milewise.com>\r\n * MIT Licensed\r\n */\r\n\r\nimport { HttpClient, HttpResponse } from '@angular/common/http';\r\nimport * as assert from 'assert';\r\nimport { findPrefix } from './utils';\r\nimport * as _ from 'lodash';\r\nimport uuid4 from 'uuid/v4';\r\nimport { from, Observable, throwError } from 'rxjs';\r\nimport { flatMap, map } from 'rxjs/operators';\r\nimport { Multipart } from './multipart';\r\nimport { SoapAttachment } from './soapAttachment';\r\n\r\nconst nonIdentifierChars = /[^a-z$_0-9]/i;\r\n\r\nexport const Client = function(wsdl, endpoint, options) {\r\n    options = options || {};\r\n    this.wsdl = wsdl;\r\n    this._initializeOptions(options);\r\n    this._initializeServices(endpoint);\r\n    this.httpClient = options.httpClient as HttpClient;\r\n    const promiseOptions: any = { multiArgs: true };\r\n    if (options.overridePromiseSuffix) {\r\n        promiseOptions.suffix = options.overridePromiseSuffix;\r\n    }\r\n    Promise.all([this, promiseOptions]);\r\n};\r\n\r\nClient.prototype.addSoapHeader = function(soapHeader, name, namespace, xmlns) {\r\n    if (!this.soapHeaders) {\r\n        this.soapHeaders = [];\r\n    }\r\n    if (typeof soapHeader === 'object') {\r\n        soapHeader = this.wsdl.objectToXML(soapHeader, name, namespace, xmlns, true);\r\n    }\r\n    return this.soapHeaders.push(soapHeader) - 1;\r\n};\r\n\r\nClient.prototype.changeSoapHeader = function(index, soapHeader, name, namespace, xmlns) {\r\n    if (!this.soapHeaders) {\r\n        this.soapHeaders = [];\r\n    }\r\n    if (typeof soapHeader === 'object') {\r\n        soapHeader = this.wsdl.objectToXML(soapHeader, name, namespace, xmlns, true);\r\n    }\r\n    this.soapHeaders[index] = soapHeader;\r\n};\r\n\r\nClient.prototype.getSoapHeaders = function() {\r\n    return this.soapHeaders;\r\n};\r\n\r\nClient.prototype.clearSoapHeaders = function() {\r\n    this.soapHeaders = null;\r\n};\r\n\r\nClient.prototype.addHttpHeader = function(name, value) {\r\n    if (!this.httpHeaders) {\r\n        this.httpHeaders = {};\r\n    }\r\n    this.httpHeaders[name] = value;\r\n};\r\n\r\nClient.prototype.getHttpHeaders = function() {\r\n    return this.httpHeaders;\r\n};\r\n\r\nClient.prototype.clearHttpHeaders = function() {\r\n    this.httpHeaders = {};\r\n};\r\n\r\nClient.prototype.addBodyAttribute = function(bodyAttribute, name, namespace, xmlns) {\r\n    if (!this.bodyAttributes) {\r\n        this.bodyAttributes = [];\r\n    }\r\n    if (typeof bodyAttribute === 'object') {\r\n        let composition = '';\r\n        Object.getOwnPropertyNames(bodyAttribute).forEach(function(prop, idx, array) {\r\n            composition += ' ' + prop + '=\"' + bodyAttribute[prop] + '\"';\r\n        });\r\n        bodyAttribute = composition;\r\n    }\r\n    if (bodyAttribute.substr(0, 1) !== ' ') bodyAttribute = ' ' + bodyAttribute;\r\n    this.bodyAttributes.push(bodyAttribute);\r\n};\r\n\r\nClient.prototype.getBodyAttributes = function() {\r\n    return this.bodyAttributes;\r\n};\r\n\r\nClient.prototype.clearBodyAttributes = function() {\r\n    this.bodyAttributes = null;\r\n};\r\n\r\nClient.prototype.setEndpoint = function(endpoint) {\r\n    this.endpoint = endpoint;\r\n    this._initializeServices(endpoint);\r\n};\r\n\r\nClient.prototype.describe = function() {\r\n    const types = this.wsdl.definitions.types;\r\n    return this.wsdl.describeServices();\r\n};\r\n\r\nClient.prototype.setSecurity = function(security) {\r\n    this.security = security;\r\n};\r\n\r\nClient.prototype.setSOAPAction = function(SOAPAction) {\r\n    this.SOAPAction = SOAPAction;\r\n};\r\n\r\nClient.prototype._initializeServices = function(endpoint) {\r\n    const definitions = this.wsdl.definitions,\r\n        services = definitions.services;\r\n    for (const name in services) {\r\n        this[name] = this._defineService(services[name], endpoint);\r\n    }\r\n};\r\n\r\nClient.prototype._initializeOptions = function(options) {\r\n    this.streamAllowed = options.stream;\r\n    this.normalizeNames = options.normalizeNames;\r\n    this.wsdl.options.attributesKey = options.attributesKey || 'attributes';\r\n    this.wsdl.options.envelopeKey = options.envelopeKey || 'soap';\r\n    this.wsdl.options.preserveWhitespace = !!options.preserveWhitespace;\r\n    if (options.ignoredNamespaces !== undefined) {\r\n        if (options.ignoredNamespaces.override !== undefined) {\r\n            if (options.ignoredNamespaces.override === true) {\r\n                if (options.ignoredNamespaces.namespaces !== undefined) {\r\n                    this.wsdl.options.ignoredNamespaces = options.ignoredNamespaces.namespaces;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (options.overrideRootElement !== undefined) {\r\n        this.wsdl.options.overrideRootElement = options.overrideRootElement;\r\n    }\r\n    this.wsdl.options.forceSoap12Headers = !!options.forceSoap12Headers;\r\n};\r\n\r\nClient.prototype._defineService = function(service, endpoint) {\r\n    const ports = service.ports,\r\n        def = {};\r\n    for (const name in ports) {\r\n        def[name] = this._definePort(ports[name], endpoint ? endpoint : ports[name].location);\r\n    }\r\n    return def;\r\n};\r\n\r\nClient.prototype._definePort = function(port, endpoint) {\r\n    const location = endpoint,\r\n        binding = port.binding,\r\n        methods = binding.methods,\r\n        def = {};\r\n    for (const name in methods) {\r\n        def[name] = this._defineMethod(methods[name], location);\r\n        const methodName = this.normalizeNames ? name.replace(nonIdentifierChars, '_') : name;\r\n        this[methodName] = def[name];\r\n    }\r\n    return def;\r\n};\r\n\r\nClient.prototype._defineMethod = function(method, location) {\r\n    const self = this;\r\n    let temp = null;\r\n    return function(args, options, extraHeaders): Observable<any> {\r\n        return self._invoke(method, args, location, options, extraHeaders);\r\n    };\r\n};\r\n\r\nClient.prototype._invoke = function(method, args, location, options, extraHeaders): Observable<any> {\r\n    let self = this,\r\n        name = method.$name,\r\n        input = method.input,\r\n        output = method.output,\r\n        style = method.style,\r\n        defs = this.wsdl.definitions,\r\n        envelopeKey = this.wsdl.options.envelopeKey,\r\n        ns = defs.$targetNamespace,\r\n        encoding = '',\r\n        message = '',\r\n        xml = null,\r\n        req = null,\r\n        soapAction = null,\r\n        alias = findPrefix(defs.xmlns, ns),\r\n        headers: any = {\r\n            'Content-Type': 'text/xml; charset=utf-8'\r\n        },\r\n        xmlnsSoap = 'xmlns:' + envelopeKey + '=\"http://schemas.xmlsoap.org/soap/envelope/\"';\r\n\r\n    if (this.wsdl.options.forceSoap12Headers) {\r\n        headers['Content-Type'] = 'application/soap+xml; charset=utf-8';\r\n        xmlnsSoap = 'xmlns:' + envelopeKey + '=\"http://www.w3.org/2003/05/soap-envelope\"';\r\n    }\r\n\r\n    if (this.SOAPAction) {\r\n        soapAction = this.SOAPAction;\r\n    } else if (method.soapAction !== undefined && method.soapAction !== null) {\r\n        soapAction = method.soapAction;\r\n    } else {\r\n        soapAction = (ns.lastIndexOf('/') !== ns.length - 1 ? ns + '/' : ns) + name;\r\n    }\r\n\r\n    if (!this.wsdl.options.forceSoap12Headers) {\r\n        headers.SOAPAction = '\"' + soapAction + '\"';\r\n    }\r\n\r\n    options = options || {};\r\n\r\n    //Add extra headers\r\n    for (const header in this.httpHeaders) {\r\n        headers[header] = this.httpHeaders[header];\r\n    }\r\n    for (const attr in extraHeaders) {\r\n        headers[attr] = extraHeaders[attr];\r\n    }\r\n\r\n    // Allow the security object to add headers\r\n    if (self.security && self.security.addHeaders) self.security.addHeaders(headers);\r\n    if (self.security && self.security.addOptions) self.security.addOptions(options);\r\n\r\n    if (style === 'rpc' && (input.parts || input.name === 'element' || args === null)) {\r\n        assert.ok(!style || style === 'rpc', 'invalid message definition for document style binding');\r\n        message = self.wsdl.objectToRpcXML(name, args, alias, ns, input.name !== 'element');\r\n        method.inputSoap === 'encoded' && (encoding = 'soap:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" ');\r\n    } else {\r\n        assert.ok(!style || style === 'document', 'invalid message definition for rpc style binding');\r\n        // pass `input.$lookupType` if `input.$type` could not be found\r\n        message = self.wsdl.objectToDocumentXML(input.$name, args, input.targetNSAlias, input.targetNamespace, input.$type || input.$lookupType);\r\n    }\r\n    xml =\r\n        '<?xml version=\"1.0\" encoding=\"utf-8\"?>' +\r\n        '<' +\r\n        envelopeKey +\r\n        ':Envelope ' +\r\n        xmlnsSoap +\r\n        ' ' +\r\n        'xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" ' +\r\n        encoding +\r\n        this.wsdl.xmlnsInEnvelope +\r\n        '>' +\r\n        (self.soapHeaders || self.security\r\n            ? '<' +\r\n              envelopeKey +\r\n              ':Header>' +\r\n              (self.soapHeaders ? self.soapHeaders.join('\\n') : '') +\r\n              (self.security && !self.security.postProcess ? self.security.toXML() : '') +\r\n              '</' +\r\n              envelopeKey +\r\n              ':Header>'\r\n            : '') +\r\n        '<' +\r\n        envelopeKey +\r\n        ':Body' +\r\n        (self.bodyAttributes ? self.bodyAttributes.join(' ') : '') +\r\n        (self.security && self.security.postProcess ? ' Id=\"_0\"' : '') +\r\n        '>' +\r\n        message +\r\n        '</' +\r\n        envelopeKey +\r\n        ':Body>' +\r\n        '</' +\r\n        envelopeKey +\r\n        ':Envelope>';\r\n\r\n    if (self.security && self.security.postProcess) {\r\n        xml = self.security.postProcess(xml, envelopeKey);\r\n    }\r\n\r\n    if (options && options.postProcess) {\r\n        xml = options.postProcess(xml);\r\n    }\r\n\r\n    self.lastMessage = message;\r\n    self.lastRequest = xml;\r\n    self.lastEndpoint = location;\r\n\r\n    const tryJSONparse = function(body) {\r\n        try {\r\n            return JSON.parse(body);\r\n        } catch (err) {\r\n            return undefined;\r\n        }\r\n    };\r\n\r\n    return from(SoapAttachment.fromFormFiles(options.attachments)).pipe(\r\n        map((soapAttachments: SoapAttachment[]) => {\r\n            if (!soapAttachments.length) {\r\n                return xml;\r\n            }\r\n\r\n            if (options.forceMTOM || soapAttachments.length > 0) {\r\n                const start = uuid4();\r\n                const boundry = uuid4();\r\n                let action = null;\r\n                if (headers['Content-Type'].indexOf('action') > -1) {\r\n                    for (const ct of headers['Content-Type'].split('; ')) {\r\n                        if (ct.indexOf('action') > -1) {\r\n                            action = ct;\r\n                        }\r\n                    }\r\n                }\r\n\r\n                headers['Content-Type'] =\r\n                    'multipart/related; type=\"application/xop+xml\"; start=\"<' + start + '>\"; start-info=\"text/xml\"; boundary=\"' + boundry + '\"';\r\n                if (action) {\r\n                    headers['Content-Type'] = headers['Content-Type'] + '; ' + action;\r\n                }\r\n\r\n                const multipart: any[] = [\r\n                    {\r\n                        'Content-Type': 'application/xop+xml; charset=UTF-8; type=\"text/xml\"',\r\n                        'Content-ID': '<' + start + '>',\r\n                        body: xml\r\n                    }\r\n                ];\r\n\r\n                soapAttachments.forEach((attachment: SoapAttachment) => {\r\n                    multipart.push({\r\n                        'Content-Type': attachment.mimetype + ';',\r\n                        'Content-Transfer-Encoding': 'binary',\r\n                        'Content-ID': '<' + (attachment.contentId || attachment.name) + '>',\r\n                        'Content-Disposition': 'attachment; name=\"' + attachment.name + '\"; filename=\"' + attachment.name + '\"',\r\n                        body: attachment.body\r\n                    });\r\n                });\r\n\r\n                return new Multipart().build(multipart, boundry);\r\n            }\r\n        }),\r\n        flatMap((body: any) =>\r\n            (<HttpClient>self.httpClient)\r\n                .post(location, body, {\r\n                    headers: headers,\r\n                    responseType: 'text',\r\n                    observe: 'response'\r\n                })\r\n                .pipe(\r\n                    map((response: HttpResponse<any>) => {\r\n                        self.lastResponse = response.body;\r\n                        self.lastResponseHeaders = response && response.headers;\r\n                        return parseSync(response.body, response);\r\n                    })\r\n                )\r\n        )\r\n    );\r\n\r\n    function parseSync(body, response: HttpResponse<any>) {\r\n        let obj;\r\n        try {\r\n            obj = self.wsdl.xmlToObject(body);\r\n        } catch (error) {\r\n            //  When the output element cannot be looked up in the wsdl and the body is JSON\r\n            //  instead of sending the error, we pass the body in the response.\r\n            if (!output || !output.$lookupTypes) {\r\n                // debug('Response element is not present. Unable to convert response xml to json.');\r\n                //  If the response is JSON then return it as-is.\r\n                const json = _.isObject(body) ? body : tryJSONparse(body);\r\n                if (json) {\r\n                    return { err: null, response, responseBody: json, header: undefined, xml };\r\n                }\r\n            }\r\n            error.response = response;\r\n            error.body = body;\r\n            // self.emit('soapError', error, eid);\r\n            throw error;\r\n        }\r\n        return finish(obj, body, response);\r\n    }\r\n\r\n    function finish(obj, responseBody, response) {\r\n        let result = null;\r\n\r\n        if (!output) {\r\n            // one-way, no output expected\r\n            return { err: null, response: null, responseBody, header: obj.Header, xml };\r\n        }\r\n\r\n        // If it's not HTML and Soap Body is empty\r\n        if (!obj.html && !obj.Body) {\r\n            return { err: null, obj, responseBody, header: obj.Header, xml };\r\n        }\r\n\r\n        if (typeof obj.Body !== 'object') {\r\n            const error: any = new Error('Cannot parse response');\r\n            error.response = response;\r\n            error.body = responseBody;\r\n            return { err: error, obj, responseBody, header: undefined, xml };\r\n        }\r\n\r\n        result = obj.Body[output.$name];\r\n        // RPC/literal response body may contain elements with added suffixes I.E.\r\n        // 'Response', or 'Output', or 'Out'\r\n        // This doesn't necessarily equal the ouput message name. See WSDL 1.1 Section 2.4.5\r\n        if (!result) {\r\n            result = obj.Body[output.$name.replace(/(?:Out(?:put)?|Response)$/, '')];\r\n        }\r\n        if (!result) {\r\n            ['Response', 'Out', 'Output'].forEach(function(term) {\r\n                if (obj.Body.hasOwnProperty(name + term)) {\r\n                    return (result = obj.Body[name + term]);\r\n                }\r\n            });\r\n        }\r\n\r\n        return { err: null, result, responseBody, header: obj.Header, xml };\r\n    }\r\n};\r\n\r\nClient.prototype.call = function(method: string, body: any, options?: any, extraHeaders?: any): Observable<any> {\r\n    if (!this[method]) {\r\n        return throwError(`Method ${method} not found`);\r\n    }\r\n\r\n    return (<Function>this[method]).call(this, body, options, extraHeaders);\r\n};\r\n","/*\r\n * Copyright (c) 2011 Vinay Pulim <vinay@milewise.com>\r\n * MIT Licensed\r\n */\r\n\r\nimport * as wsdl from './wsdl';\r\nimport { security } from './security/security';\r\nimport { Client } from './client';\r\nexport { Client } from './client';\r\nexport { security  } from './security/security';\r\n\r\nexport { passwordDigest } from './utils'\r\nexport const WSDL = wsdl.WSDL;\r\n\r\nconst cache = {}; // TODO some caching?\r\n\r\nconst getFromCache = async (url, options) => {\r\n  // console.log('Getting from cache', url);\r\n  // console.log('Cache', cache)\r\n  if (cache[url]) {\r\n    // console.log('Found in cache', url);\r\n    return cache[url];\r\n  } else {\r\n    return wsdl.open_wsdl(url, options).then(wsdl => {\r\n      cache[url] = wsdl;\r\n      return wsdl;\r\n    })\r\n  }\r\n};\r\n\r\nasync function _requestWSDL(url, options) {\r\n  if (options.disableCache === true) {\r\n    return wsdl.open_wsdl(url, options);\r\n  } else {\r\n    return getFromCache(url, options);\r\n  }\r\n\r\n}\r\n\r\nexport async function createClient(url, options, endpoint): Promise<any> {\r\n  if (typeof options === 'undefined') {\r\n    options = {};\r\n  }\r\n  // console.log(\"createClient\", options)\r\n  endpoint = options.endpoint || endpoint;\r\n  \r\n  const wsdl = await _requestWSDL(url, options);\r\n  const client = new Client(wsdl, endpoint, options);\r\n  return client;\r\n}\r\n\r\nexport const BasicAuthSecurity = security.BasicAuthSecurity;\r\nexport const NTLMSecurity = security.NTLMSecurity;\r\nexport const WSSecurity = security.WSSecurity;\r\n// export const WSSecurityCert = security.WSSecurityCert;\r\nexport const BearerSecurity = security.BearerSecurity;\r\n// export const ClientSSLSecurity = security.ClientSSLSecurity;\r\n// export const ClientSSLSecurityPFX = security.ClientSSLSecurityPFX;\r\n","import { Injectable } from '@angular/core';\r\nimport { createClient } from './soap/soap';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Client } from './soap/interfaces';\r\n\r\nexport {\r\n  Client,\r\n  WSDL,\r\n  ISoapMethod,\r\n  ISoapMethodResponse,\r\n  BasicAuthSecurity,\r\n  BearerSecurity,\r\n  // WSSecurityCert,\r\n  WSSecurity,\r\n  NTLMSecurity\r\n} from './soap/interfaces';\r\n\r\nexport { security } from './soap/security/security'\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NgxSoapService {\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  createClient(wsdlUrl: string, options: any = {}, endpoint?: string): Promise<Client> {\r\n    options.httpClient = this.http;\r\n    return createClient(wsdlUrl, options, endpoint) ;\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { HttpClientModule } from '@angular/common/http';\r\n\r\n@NgModule({\r\n  imports: [\r\n    HttpClientModule\r\n  ],\r\n  exports: []\r\n})\r\nexport class NgxSoapModule { }\r\n","/*\r\n * Public API Surface of ngx-soap\r\n */\r\n\r\nexport * from './lib/ngx-soap.service';\r\nexport * from './lib/ngx-soap.module';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["TNS_PREFIX","utils.TNS_PREFIX","findPrefix","utils.findPrefix","_.mergeWith","_.isArray","_.defaultsDeep","assert","_.merge","url.resolve","_.assign","sax.parser","_.isPlainObject","sax.createStream","assert.ok","_.isObject","WSDL","wsdl.WSDL","wsdl.open_wsdl","BasicAuthSecurity","NTLMSecurity","WSSecurity","BearerSecurity"],"mappings":"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"}